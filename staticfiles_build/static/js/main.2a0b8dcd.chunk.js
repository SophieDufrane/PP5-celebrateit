(this.webpackJsonpmoments=this.webpackJsonpmoments||[]).push([[0],{10:function(e,t,a){e.exports={FormWrapper:"AuthForm_FormWrapper__2_2G7",FormGroupSpacing:"AuthForm_FormGroupSpacing__2YsuF",CenteredButton:"AuthForm_CenteredButton__mPhxp",AuthLink:"AuthForm_AuthLink__2nuPw",AuthLinkHighlight:"AuthForm_AuthLinkHighlight__2veRz",gradient:"AuthForm_gradient__4bNq5",gradientOverlay:"AuthForm_gradientOverlay__1aP-S",splitBox:"AuthForm_splitBox__3Qoc9",formBox:"AuthForm_formBox__2Tlgu",imageBox:"AuthForm_imageBox__1jRNM",AuthImage:"AuthForm_AuthImage__1OpaW",AuthTitle:"AuthForm_AuthTitle__tI1Xj",ErrorBox:"AuthForm_ErrorBox__2o8wb"}},119:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),c=a(26),o=a.n(c),r=(a(89),a(16)),l=a.n(r),i=a(129),d=a(82),j=a(130),m=a(79),u=a.n(m),h=a(12),p=a(9),b=a(13),O=a.n(b);O.a.defaults.baseURL="/api",O.a.defaults.headers.post["Content-Type"]="multipart/form-data",O.a.defaults.withCredentials=!0;const x=O.a.create(),g=O.a.create();a(80);const _=()=>{localStorage.removeItem("refreshTokenTimestamp")};var f=a(1);const v=Object(s.createContext)(),C=Object(s.createContext)(),N=()=>Object(s.useContext)(v),y=()=>Object(s.useContext)(C),w=e=>{let{children:t}=e;const[a,n]=Object(s.useState)(null),c=Object(h.f)();return Object(s.useEffect)((()=>{(async()=>{try{const{data:e}=await g.get("dj-rest-auth/user/");n(e)}catch(e){}})()}),[]),Object(s.useMemo)((()=>{x.interceptors.request.use((async e=>{if(localStorage.getItem("refreshTokenTimestamp"))try{await O.a.post("/dj-rest-auth/token/refresh/")}catch(t){return n((e=>(e&&c.push("/signin"),null))),_(),e}return e}),(e=>Promise.reject(e))),g.interceptors.response.use((e=>e),(async e=>{var t;if(401===(null===(t=e.response)||void 0===t?void 0:t.status)){try{await O.a.post("/dj-rest-auth/token/refresh/")}catch(e){n((e=>(e&&c.push("/signin"),null))),_()}return O()(e.config)}return Promise.reject(e)}))}),[c]),Object(f.jsx)(v.Provider,{value:a,children:Object(f.jsx)(C.Provider,{value:n,children:t})})};var P=()=>{const e=N(),t=y(),a=Object(h.f)();return Object(f.jsx)(i.a,{className:u.a.Navbar,expand:"md",fixed:"top",children:Object(f.jsxs)(d.a,{children:[Object(f.jsxs)(i.a.Brand,{as:p.c,to:"/",children:["CelebrateIt"," ",e&&`| ${e.first_name||e.username}`]}),Object(f.jsx)(i.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(f.jsx)(i.a.Collapse,{id:"basic-navbar-nav",children:Object(f.jsxs)(j.a,{className:"ml-auto text-left",children:[Object(f.jsx)(j.a.Link,{as:p.c,exact:!0,to:"/",children:"Home"}),e?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(p.c,{to:"/posts/create",className:"nav-link",children:"Recognize"}),Object(f.jsx)(p.c,{to:"/nominations/create",className:"nav-link",children:"Nominate"}),Object(f.jsx)(p.c,{to:`/profiles/${null===e||void 0===e?void 0:e.profile_id}`,className:"nav-link",children:"Profile"}),Object(f.jsx)(j.a.Link,{as:p.c,to:"/",onClick:async()=>{try{await x.post("/dj-rest-auth/logout/"),t(null),a.push("/login?loggedOut=true")}catch(e){console.error("Logout failed:",e)}},children:"Logout"})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(j.a.Link,{as:p.c,to:"/login",children:"Log In"}),Object(f.jsx)(j.a.Link,{as:p.c,to:"/register",children:"Register"})]})]})})]})})},F=a(123),k=a(124),S=a(84),I=a(83),A=a(132),T=a(128),B=a(122),$=a(127),D=a(64),L=a.n(D);const E=n.a.forwardRef(((e,t)=>{let{onClick:a}=e;return Object(f.jsx)("i",{className:`fas fa-ellipsis-v ${L.a.DropdownToggle}`,ref:t,onClick:e=>{e.preventDefault(),a(e)},role:"button","aria-label":"options"})}));var R=e=>{let{handleEdit:t,handleDelete:a}=e;return Object(f.jsxs)($.a,{align:"end",children:[Object(f.jsx)($.a.Toggle,{as:E}),Object(f.jsxs)($.a.Menu,{children:[t&&Object(f.jsxs)($.a.Item,{className:L.a.DropdownItem,onClick:t,children:[Object(f.jsx)("i",{className:"fas fa-edit"}),"Edit"]}),a&&Object(f.jsxs)($.a.Item,{className:L.a.DropdownItem,onClick:a,children:[Object(f.jsx)("i",{className:"fas fa-trash-alt"}),"Delete"]})]})]})},G=a(125);var W=function(e){let{show:t,onHide:a,onConfirm:s,message:n="Are you sure you want to delete this post?"}=e;return Object(f.jsxs)(G.a,{show:t,onHide:a,centered:!0,children:[Object(f.jsx)(G.a.Header,{closeButton:!0,children:Object(f.jsx)(G.a.Title,{children:"Confirm Deletion"})}),Object(f.jsx)(G.a.Body,{children:n}),Object(f.jsxs)(G.a.Footer,{children:[Object(f.jsx)(I.a,{variant:"secondary",onClick:a,children:"Cancel"}),Object(f.jsx)(I.a,{variant:"danger",onClick:s,children:"Delete"})]})]})},H=a(8),U=a.n(H),M=a(131);var Y=function(e){const{display_name:t,created_at:a,renderDropdown:s}=e;return Object(f.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[Object(f.jsxs)("div",{className:"d-flex align-items-center",children:[Object(f.jsx)("div",{className:U.a.AvatarPlaceholder}),Object(f.jsx)("strong",{className:"ml-2",children:t})]}),Object(f.jsxs)("div",{className:"d-flex align-items-center",children:[Object(f.jsx)("small",{className:"text-muted me-2",children:a}),s]})]})};var V=e=>{const{title:t,content:a,display_name:s,created_at:n,renderDropdown:c,postActions:o,children:r,extraContent:l,linkTo:i,metaTop:d}=e,j=Object(f.jsxs)(M.a.Body,{children:[Object(f.jsx)(Y,{display_name:s,created_at:n,renderDropdown:c}),d&&Object(f.jsx)("div",{className:U.a.MetaTopWrapper,children:d}),Object(f.jsx)("h5",{className:U.a.PostTitle,children:t}),Object(f.jsx)("p",{className:U.a.PostContent,children:a}),l&&Object(f.jsx)("div",{className:U.a.ViewFullWrapper,children:l}),r&&Object(f.jsx)("div",{className:U.a.PostChildren,children:r})]});return Object(f.jsxs)(M.a,{className:`mb-3 ${U.a.CardWrapper}`,children:[i?Object(f.jsx)(p.b,{to:i,style:{textDecoration:"none",color:"inherit"},children:j}):j,o]})};var z=e=>{const{id:t,title:a,content:n,image:c,display_name:o,created_at:r,likes_count:l,comments_count:i,is_user:d,like_id:j,setPosts:m,onPostDelete:u,detailUrl:b=`/posts/${t}`,editUrl:O=`/posts/${t}/edit`,deleteUrl:_=`/posts/${t}`}=e,v=N(),C=Object(h.f)(),[y,w]=Object(s.useState)(!1),P=n.length>150?n.slice(0,n.slice(0,150).lastIndexOf(" "))+"...":n,F=Object(f.jsxs)("div",{className:U.a.PostFooter,children:[Object(f.jsxs)("div",{className:U.a.ActionItem,children:[d?Object(f.jsx)(T.a,{placement:"top",overlay:Object(f.jsx)(B.a,{id:"tooltip-self-like",children:"Can't like your own post!"}),children:Object(f.jsx)("span",{style:{cursor:"not-allowed"},children:Object(f.jsx)("i",{className:"far fa-thumbs-up"})})}):j?Object(f.jsx)("span",{onClick:async()=>{try{console.log("Trying to unlike with like_id:",j),await g.delete(`/likes/${j}/`),m((e=>e.map((e=>e.id===t?{...e,likes_count:e.likes_count-1,like_id:null}:e))))}catch(e){console.log(e)}},className:`${U.a.ActionItem} ${U.a.Clickable}`,children:Object(f.jsx)("i",{className:`fas fa-thumbs-up ${U.a.Heart} ${U.a.Clickable}`})}):v?Object(f.jsx)("span",{onClick:async()=>{try{const{data:e}=await g.post("/likes/",{post:t});console.log("Like API response:",e),m((a=>a.map((a=>a.id===t?{...a,likes_count:a.likes_count+1,like_id:e.id}:a)))),console.log("Post updated with new like_id:",e.id)}catch(e){console.log(e)}},className:`${U.a.ActionItem} ${U.a.Clickable}`,children:Object(f.jsx)("i",{className:`far fa-thumbs-up ${U.a.HeartOutline} ${U.a.Clickable}`})}):Object(f.jsx)("i",{className:"far fa-thumbs-up",title:"Log in to like posts!"}),Object(f.jsx)("span",{children:l})]}),Object(f.jsxs)(p.b,{to:`/posts/${t}`,className:`${U.a.ActionItem} ${U.a.Clickable}`,children:[Object(f.jsx)("i",{className:"far fa-comment"}),Object(f.jsx)("span",{children:i})]})]});return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(V,{title:a,content:P,display_name:o,created_at:r,likes_count:l,comments_count:i,renderDropdown:d&&Object(f.jsx)(R,{handleEdit:()=>C.push(O),handleDelete:()=>w(!0)}),postActions:F,extraContent:Object(f.jsx)("div",{className:U.a.ViewFullPostWrapper,children:Object(f.jsx)(p.b,{to:b,className:U.a.ViewFullPostLink,children:"View full post"})}),children:c&&Object(f.jsx)("div",{className:U.a.ImageWrapper,children:Object(f.jsx)("img",{src:c,alt:a,className:U.a.PostImage})})}),Object(f.jsx)(W,{show:y,onHide:()=>w(!1),onConfirm:async()=>{try{await x.delete(_),u&&u(t),C.push("/?deleted=true")}catch(e){console.error("Delete failed:",e)}finally{w(!1)}}})]})};var J=e=>{const{id:t,title:a,content:n,display_name:c,created_at:o,is_user:r,nominee_display_name:l,tag:i,tag_color:d,onPostDelete:j,detailUrl:m=`/nominations/${t}`,editUrl:u=`/nominations/${t}/edit`,deleteUrl:b=`/nominations/${t}`}=e,O=Object(h.f)(),[g,_]=Object(s.useState)(!1),v=n.length>150?n.slice(0,n.slice(0,150).lastIndexOf(" "))+"...":n;return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(V,{title:a,content:v,display_name:c,created_at:o,renderDropdown:r&&Object(f.jsx)(R,{handleEdit:()=>O.push(u),handleDelete:()=>_(!0)}),metaTop:l&&i&&Object(f.jsxs)("p",{className:U.a.NominationMeta,children:[Object(f.jsx)("strong",{children:l})," was nominated by"," ",Object(f.jsx)("strong",{children:c})," ",Object(f.jsx)("span",{style:{backgroundColor:d,color:"#fff",padding:"2px 8px",borderRadius:"12px",fontSize:"0.8rem"},children:i})]}),extraContent:n.length>150&&Object(f.jsx)("div",{className:U.a.ViewFullPostWrapper,children:Object(f.jsx)(p.b,{to:m,className:U.a.ViewFullPostLink,children:"View full post"})})}),Object(f.jsx)(W,{show:g,onHide:()=>_(!1),onConfirm:async()=>{try{await x.delete(b),j&&j(t),O.push("/?deleted=true")}catch(e){console.error("Delete failed:",e)}finally{_(!1)}}})]})},q=a(35),K=a.n(q);var Q=()=>{const e=Object(h.g)(),t="true"===new URLSearchParams(e.search).get("deleted"),[a,n]=Object(s.useState)(t),[c,o]=Object(s.useState)([]),[r,i]=Object(s.useState)([]),[j,m]=Object(s.useState)(!1),[u,p]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{const t="true"===new URLSearchParams(e.search).get("deleted");n(t)}),[e.search]),Object(s.useEffect)((()=>{if(a){const e=setTimeout((()=>n(!1)),4e3);return()=>clearTimeout(e)}}),[a]),Object(s.useEffect)((()=>{O.a.get("/posts/").then((e=>o(e.data.results))).catch((e=>console.error(e))).finally((()=>p(!0)))}),[]),Object(s.useEffect)((()=>{O.a.get("/nominations/").then((e=>i(e.data.results))).catch((e=>console.error("Error fetching nominations:",e)))}),[]),Object(f.jsxs)(d.a,{children:[a&&Object(f.jsx)(F.a,{variant:"success",onClose:()=>n(!1),dismissible:!0,children:"The post has been deleted successfully."}),Object(f.jsxs)(k.a,{children:[Object(f.jsx)(S.a,{md:8,children:Object(f.jsxs)("div",{className:K.a.FeedContent,children:[Object(f.jsxs)("div",{className:K.a.FeedToggleButtons,children:[Object(f.jsx)(I.a,{variant:"none",className:`${K.a.FeedButton} ${j?l.a.FeedToggleInactive:l.a.FeedToggleActive}`,onClick:()=>m(!1),children:"Recognition Stories"}),Object(f.jsx)(I.a,{variant:"none",className:`${K.a.FeedButton} ${j?l.a.FeedToggleActive:l.a.FeedToggleInactive}`,onClick:()=>m(!0),children:"Nominations"})]}),u?Object(f.jsx)(f.Fragment,{children:j?r.length?r.map((e=>Object(f.jsx)(J,{...e,setPosts:i,onPostDelete:e=>i((t=>t.filter((t=>t.id!==e))))},`nom-${e.id}`))):Object(f.jsx)("div",{children:"No nominations yet"}):c.length?c.map((e=>Object(f.jsx)(z,{...e,setPosts:o,onPostDelete:e=>o((t=>t.filter((t=>t.id!==e))))},`post-${e.id}`))):Object(f.jsx)("div",{children:"No posts yet"})}):Object(f.jsx)("div",{children:"Loading..."})]})}),Object(f.jsxs)(S.a,{md:4,className:K.a.PeopleSidebar,children:[Object(f.jsx)("input",{type:"text",className:"form-control mb-3",placeholder:"Search people...",disabled:!0}),Object(f.jsxs)(A.a,{children:[Object(f.jsx)(A.a.Item,{className:K.a.PersonItem,children:"Person 1"}),Object(f.jsx)(A.a.Item,{className:K.a.PersonItem,children:"Person 2"}),Object(f.jsx)(A.a.Item,{className:K.a.PersonItem,children:"Person 3"})]})]})]})]})},Z=a(126),X=a(14),ee=a.n(X);var te=e=>{let{title:t,content:a,handleChange:s,handleSubmit:n,children:c,submitText:o="Submit",onCancel:r}=e;const i=Object(h.f)();return Object(f.jsxs)(Z.a,{onSubmit:n,className:ee.a.FormWrapper,children:[Object(f.jsx)(Z.a.Group,{controlId:"title",className:ee.a.FormGroupSpacing,children:Object(f.jsx)(T.a,{placement:"top",overlay:Object(f.jsx)(B.a,{children:"Enter a short, clear post title"}),children:Object(f.jsx)(Z.a.Control,{type:"text",placeholder:"Enter title",name:"title",value:t,onChange:s})})}),Object(f.jsx)(Z.a.Group,{controlId:"content",className:ee.a.FormGroupSpacing,children:Object(f.jsx)(T.a,{placement:"top",overlay:Object(f.jsx)(B.a,{children:"Write the story you want to share"}),children:Object(f.jsx)(Z.a.Control,{as:"textarea",rows:10,placeholder:"Write your story...",name:"content",value:a,onChange:s})})}),c,Object(f.jsxs)("div",{className:ee.a.FormButtonRow,children:[Object(f.jsx)(I.a,{type:"submit",className:l.a.YellowButton,children:o}),Object(f.jsx)(I.a,{className:l.a.BlueButton,variant:"outline-secondary",onClick:r||(()=>i.goBack()),children:"Cancel"})]})]})};var ae=function(){const[e,t]=Object(s.useState)({title:"",content:"",image:null}),{title:a,content:n,image:c}=e,o=Object(h.f)(),r=a=>{const{name:s,value:n,files:c}=a.target;t("image"===s?{...e,image:c[0]}:{...e,[s]:n})};return Object(f.jsx)(d.a,{children:Object(f.jsx)(te,{title:a,content:n,handleChange:r,handleSubmit:async e=>{e.preventDefault();const t=new FormData;t.append("title",a),t.append("content",n),c&&t.append("image",c);try{const{data:e}=await x.post("/posts/",t);o.push(`/posts/${e.id}?created=true`)}catch(r){var s;console.error(null===(s=r.response)||void 0===s?void 0:s.data)}},submitText:"Create",onCancel:()=>o.push("/"),children:Object(f.jsx)(Z.a.Group,{controlId:"image",className:ee.a.FormMediaWrapper,children:Object(f.jsx)(T.a,{placement:"top",overlay:Object(f.jsx)(B.a,{children:"Upload an image (optional)"}),children:Object(f.jsx)(Z.a.Control,{type:"file",name:"image",onChange:r})})})})})};var se=function(e){let{postId:t,onCommentSubmit:a,disabled:n=!1}=e;const[c,o]=Object(s.useState)(""),[r,i]=Object(s.useState)({}),d=c.trim().length>0,j=e=>{o(e.target.value)};return Object(f.jsxs)(Z.a,{onSubmit:async e=>{e.preventDefault();try{const{data:e}=await x.post("/comments/",{content:c,post:t});o(""),i({}),a&&a(e)}catch(n){var s;i((null===(s=n.response)||void 0===s?void 0:s.data)||{})}},className:ee.a.FormWrapper,children:[Object(f.jsxs)(Z.a.Group,{controlId:"commentText",className:ee.a.FormGroupSpacing,children:[n?Object(f.jsx)(Z.a.Control,{as:"textarea",rows:2,placeholder:"Log in to comment",name:"comment",disabled:!0,value:c,onChange:j}):Object(f.jsx)(T.a,{placement:"top",overlay:Object(f.jsx)(B.a,{children:"Add your comment"}),children:Object(f.jsx)(Z.a.Control,{as:"textarea",rows:2,placeholder:"Write a comment...",name:"comment",disabled:n,value:c,onChange:j})}),(null===r||void 0===r?void 0:r.content)&&Object(f.jsx)("div",{className:"text-danger mt-2",children:r.content})]}),Object(f.jsx)("div",{className:ee.a.FormButtonRow,children:Object(f.jsx)(I.a,{type:"submit",className:l.a.YellowButton,disabled:n||!d,children:"Post"})})]})};var ne=function(){const{id:e}=Object(h.h)(),t=Object(h.f)(),a=Object(h.g)(),n=N(),[c,o]=Object(s.useState)(null),[r,l]=Object(s.useState)([]),[i,j]=Object(s.useState)(!1),[m,u]=Object(s.useState)(!1),p=!(null===c||void 0===c||!c.nominee);let b=null;const _=new URLSearchParams(a.search),v="true"===_.get("created"),C="true"===_.get("updated"),y=v||C,w=v?"Your recognition has been published!":C?"Your recognition has been updated!":"";if(Object(s.useEffect)((()=>{if(y){const e=setTimeout((()=>{const e=a.pathname;t.replace(e)}),4e3);return()=>clearTimeout(e)}}),[y,t,a.pathname]),Object(s.useEffect)((()=>{if(m){const e=setTimeout((()=>u(!1)),3e3);return()=>clearTimeout(e)}}),[m]),Object(s.useEffect)((()=>{O.a.get(`/posts/${e}/`).then((e=>{o(e.data)})).catch((e=>{console.error("Error fetching post details:",e)}))}),[e]),Object(s.useEffect)((()=>{O.a.get(`/comments/?post=${e}`).then((e=>{l(e.data.results||e.data)})).catch((e=>{console.error("Error fetching comments:",e)}))}),[e]),!c)return Object(f.jsx)(d.a,{children:"Loading..."});b=c.is_user?Object(f.jsx)(R,{handleEdit:()=>t.push(`/posts/${c.id}/edit`),handleDelete:()=>{j(!0)}}):null;const P=p?null:Object(f.jsxs)("div",{className:U.a.PostFooter,children:[Object(f.jsxs)("div",{className:U.a.ActionItem,children:[c.is_user?Object(f.jsx)(T.a,{placement:"top",overlay:Object(f.jsx)(B.a,{id:"tooltip-self-like",children:"Can't like your own post!"}),children:Object(f.jsx)("span",{style:{cursor:"not-allowed"},children:Object(f.jsx)("i",{className:"far fa-thumbs-up"})})}):c.like_id?Object(f.jsx)("span",{onClick:async()=>{try{await g.delete(`/likes/${c.like_id}/`),o((e=>({...e,likes_count:e.likes_count-1,like_id:null})))}catch(e){console.log(e)}},style:{cursor:"pointer"},children:Object(f.jsx)("i",{className:`fas fa-thumbs-up ${U.a.Heart}`})}):n?Object(f.jsx)("span",{onClick:async()=>{try{const{data:e}=await g.post("/likes/",{post:c.id});o((t=>({...t,likes_count:t.likes_count+1,like_id:e.id})))}catch(e){console.log(e)}},style:{cursor:"pointer"},children:Object(f.jsx)("i",{className:`far fa-thumbs-up ${U.a.HeartOutline}`})}):Object(f.jsx)("i",{className:"far fa-thumbs-up",title:"Log in to like posts!"}),Object(f.jsx)("span",{children:c.likes_count})]}),Object(f.jsxs)("div",{className:U.a.ActionItem,children:[Object(f.jsx)("i",{className:"far fa-comment"}),Object(f.jsx)("span",{children:c.comments_count})]})]});return Object(f.jsxs)(d.a,{children:[y&&Object(f.jsx)(F.a,{variant:"success",dismissible:!0,children:w}),m&&Object(f.jsx)(F.a,{variant:"success",dismissible:!0,children:"Comment posted successfully!"}),Object(f.jsx)(V,{title:c.title,content:c.content,image:c.image,display_name:c.display_name,created_at:c.created_at,likes_count:c.likes_count,comments_count:c.comments_count,renderDropdown:b,postActions:P,children:Object(f.jsxs)(f.Fragment,{children:[c.image&&Object(f.jsx)("div",{className:U.a.ImageWrapper,children:Object(f.jsx)("img",{src:c.image,alt:c.title,className:U.a.PostImage})}),Object(f.jsx)(se,{postId:c.id,disabled:!n,onCommentSubmit:e=>{l((t=>[e,...t])),o((e=>({...e,comments_count:e.comments_count+1}))),u(!0)}}),Object(f.jsx)("div",{className:U.a.CommentSpacer}),r.length?r.map((e=>Object(f.jsxs)("div",{className:U.a.CommentBlock,children:[Object(f.jsx)("strong",{className:U.a.CommentAuthor,children:e.display_name}),Object(f.jsx)("p",{className:U.a.CommentText,children:e.content}),Object(f.jsx)("small",{className:U.a.CommentDate,children:e.created_at}),Object(f.jsx)("hr",{})]},e.id))):Object(f.jsx)("p",{className:"text-muted px-3",children:"No comments yet."})]})}),Object(f.jsx)(W,{show:i,onHide:()=>j(!1),onConfirm:async()=>{try{await x.delete(`/posts/${c.id}/`),t.push("/?deleted=true")}catch(e){console.error("Delete failed:",e)}finally{j(!1)}}})]})};var ce=function(){const{id:e}=Object(h.h)(),t=Object(h.f)(),[a,n]=Object(s.useState)({title:"",content:"",image:null}),[c,o]=Object(s.useState)(!1),{title:r,content:l,image:i}=a;Object(s.useEffect)((()=>{x.get(`/posts/${e}/`).then((e=>{const{title:t,content:a,image:s}=e.data;n({title:t,content:a,image:s})})).catch((e=>{console.error("Error fetching post:",e),t.push("/")}))}),[e,t]);const j=e=>{const{name:t,value:s,files:c}=e.target;n("image"===t?{...a,image:c[0]}:{...a,[t]:s})};return Object(f.jsx)(d.a,{children:Object(f.jsx)(te,{title:r,content:l,image:i,handleChange:j,handleSubmit:async a=>{a.preventDefault();const s=new FormData;s.append("title",r),s.append("content",l),c?s.append("image",""):i&&"string"!==typeof i&&s.append("image",i);try{await x.patch(`/posts/${e}/`,s),t.push(`/posts/${e}?updated=true`)}catch(o){var n;console.error("Submission error:",null===(n=o.response)||void 0===n?void 0:n.data)}},submitText:"Update",onCancel:()=>t.push(`/posts/${e}`),children:Object(f.jsxs)(Z.a.Group,{className:ee.a.FormMediaWrapper,children:["string"===typeof i&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("img",{src:i,alt:"Current",className:ee.a.FormImagePreview}),Object(f.jsxs)("div",{className:"d-flex align-items-center gap-2 mt-2 mb-3",children:[Object(f.jsx)(Z.a.Check,{type:"checkbox",id:"remove-image",label:"",checked:c,onChange:e=>o(e.target.checked)}),Object(f.jsx)(Z.a.Label,{htmlFor:"remove-image",className:"mb-0",children:"Remove image"})]})]}),Object(f.jsx)(T.a,{placement:"top",overlay:Object(f.jsx)(B.a,{children:"Upload an image (optional)"}),children:Object(f.jsx)(Z.a.Control,{type:"file",name:"image",onChange:j})})]})})})};var oe=function(){var e;const[t,a]=Object(s.useState)({title:"",content:"",tag:""}),[n,c]=Object(s.useState)(""),[o,r]=Object(s.useState)(""),[l,i]=Object(s.useState)([]),[j,m]=Object(s.useState)([]),u=Object(h.f)(),{title:p,content:b,tag:O}=t,[g,_]=Object(s.useState)({});Object(s.useEffect)((()=>{(async()=>{try{const{data:e}=await x.get("/tags/");console.log("Fetched tags:",e),m(e.results)}catch(e){console.error("Error fetching tags:",e)}})()}),[]),Object(s.useEffect)((()=>{n?x.get(`/users/?search=${n}`).then((e=>{i(e.data.results),console.log("Nominee results:",e.data)})).catch((e=>{console.error("Error fetching nominees:",e)})):i([])}),[n]);const v=e=>{const{name:t,value:s}=e.target;"nominee"===t?(c(s),r("")):a((e=>({...e,[t]:s})))};return Object(f.jsx)(d.a,{children:Object(f.jsx)(te,{title:p,content:b,handleChange:v,handleSubmit:async e=>{e.preventDefault();const t=new FormData;t.append("title",p),t.append("content",b),t.append("nominee",o),O&&t.append("tag",O);try{const{data:e}=await x.post("/nominations/",t);u.push(`/nominations/${e.id}?created=true`)}catch(c){var a,s,n;if(401!==(null===(a=c.response)||void 0===a?void 0:a.status))_(null===(n=c.response)||void 0===n?void 0:n.data);console.error(null===(s=c.response)||void 0===s?void 0:s.data)}},submitText:"Create",onCancel:()=>{u.push("/")},children:Object(f.jsxs)(Z.a.Group,{controlId:"nominee",className:ee.a.FormMediaWrapper,children:[Object(f.jsxs)("div",{className:"mb-3",children:[Object(f.jsx)(T.a,{placement:"top",overlay:Object(f.jsx)(B.a,{children:"Search for a teammate by first or last name"}),children:Object(f.jsx)(Z.a.Control,{type:"text",name:"nominee",placeholder:"Start typing a name...",value:n,onChange:v})}),l.length>0&&Object(f.jsx)("div",{className:ee.a.SuggestionBox,children:l.map((e=>Object(f.jsxs)("div",{className:ee.a.SuggestionItem,onClick:()=>(e=>{r(e.id),c(`${e.first_name} ${e.last_name}`),i([])})(e),children:[e.first_name," ",e.last_name]},e.id)))})]}),Object(f.jsx)(T.a,{placement:"top",overlay:Object(f.jsx)(B.a,{children:"Pick a tag that reflects the nomination"}),children:Object(f.jsxs)(Z.a.Control,{as:"select",name:"tag",value:O,onChange:v,children:[Object(f.jsx)("option",{value:"",children:"Select a tag"}),j.map((e=>Object(f.jsx)("option",{value:e.name,children:e.name},e.id)))]})}),null===g||void 0===g||null===(e=g.tag)||void 0===e?void 0:e.map(((e,t)=>Object(f.jsx)("div",{className:"text-danger mt-1",children:e},t)))]})})})};var re=function(){const{id:e}=Object(h.h)(),t=Object(h.f)(),[a,n]=Object(s.useState)(!1),c=Object(h.g)(),[o,r]=Object(s.useState)(null);let l=null;const i=new URLSearchParams(c.search),j="true"===i.get("created"),m="true"===i.get("updated"),u=j||m,p=j?"Your nomination has been published!":m?"Your nomination has been updated!":"";return Object(s.useEffect)((()=>{if(u){const e=setTimeout((()=>{const e=c.pathname;t.replace(e)}),4e3);return()=>clearTimeout(e)}}),[u,t,c.pathname]),Object(s.useEffect)((()=>{O.a.get(`/nominations/${e}/`).then((e=>{r(e.data)})).catch((e=>{console.error("Error fetching nomination details:",e)}))}),[e]),o?(l=o.is_user?Object(f.jsx)(R,{handleEdit:()=>t.push(`/nominations/${o.id}/edit`),handleDelete:()=>{n(!0)}}):null,Object(f.jsxs)(d.a,{children:[u&&Object(f.jsx)(F.a,{variant:"success",dismissible:!0,children:p}),Object(f.jsx)(V,{title:o.title,content:o.content,display_name:o.display_name,created_at:o.created_at,renderDropdown:l,metaTop:o.nominee_display_name&&o.tag&&Object(f.jsxs)("p",{className:U.a.NominationMeta,children:[Object(f.jsx)("strong",{children:o.nominee_display_name})," was nominated by ",Object(f.jsx)("strong",{children:o.display_name})," ",Object(f.jsx)("span",{style:{backgroundColor:o.tag_color,color:"#fff",padding:"2px 8px",borderRadius:"12px",fontSize:"0.8rem"},children:o.tag})]})}),Object(f.jsx)(W,{show:a,onHide:()=>n(!1),onConfirm:async()=>{try{await x.delete(`/nominations/${o.id}/`),t.push("/?deleted=true")}catch(e){console.error("Error deleting nomination:",e)}finally{n(!1)}}})]})):Object(f.jsx)(d.a,{children:"Loading..."})};var le=function(){const{id:e}=Object(h.h)(),t=Object(h.f)(),[a,n]=Object(s.useState)({title:"",content:"",nominee_display_name:"",tag:""}),{title:c,content:o,nominee_display_name:r,tag:l}=a,[i,j]=Object(s.useState)([]);Object(s.useEffect)((()=>{x.get(`/nominations/${e}/`).then((e=>{const{title:t,content:a,nominee_display_name:s,tag:c}=e.data;n({title:t,content:a,nominee_display_name:s,tag:c})})).catch((e=>{console.error("Error fetching nominations:",e),t.push("/")}))}),[e,t]),Object(s.useEffect)((()=>{x.get("/tags/").then((e=>j(e.data.results))).catch((e=>{console.error("Error fetching tags:",e)}))}),[]);const m=e=>{const{name:t,value:s}=e.target;n({...a,[t]:s})};return Object(f.jsx)(d.a,{children:Object(f.jsx)(te,{title:c,content:o,handleChange:m,handleSubmit:async a=>{a.preventDefault();const s=new FormData;s.append("title",c),s.append("content",o),s.append("tag",l);try{await x.patch(`/nominations/${e}/`,s),t.push(`/nominations/${e}?updated=true`)}catch(r){var n;console.error("Submission error:",null===(n=r.response)||void 0===n?void 0:n.data)}},submitText:"Update",onCancel:()=>t.push(`/nominations/${e}`),children:Object(f.jsxs)(Z.a.Group,{className:ee.a.FormMediaWrapper,children:[Object(f.jsx)(Z.a.Label,{className:"mb-2",children:Object(f.jsx)("strong",{children:"Nominee:"})}),Object(f.jsx)("div",{className:"mb-3",children:r}),Object(f.jsx)(T.a,{placement:"top",overlay:Object(f.jsx)(B.a,{children:"Select a new tag if needed"}),children:Object(f.jsxs)(Z.a.Control,{as:"select",name:"tag",value:l,onChange:m,children:[Object(f.jsx)("option",{value:"",children:"Select a tag"}),i.map((e=>Object(f.jsx)("option",{value:e.name,children:e.name},e.id)))]})})]})})})};var ie=()=>Object(f.jsx)("div",{children:Object(f.jsx)("h1",{children:"Profile Page"})}),de=a(10),je=a.n(de),me=a.p+"static/media/auth_pic.305084ff.jpeg";var ue=function(){const e=Object(h.g)(),[t,a]=Object(s.useState)(new URLSearchParams(e.search).get("registered")),[n,c]=Object(s.useState)(new URLSearchParams(e.search).get("loggedOut"));Object(s.useEffect)((()=>{if(t||n){const e=setTimeout((()=>{a(!1),c(!1)}),4e3);return()=>clearTimeout(e)}}),[t,n]);const o=y(),[r,i]=Object(s.useState)({username:"",password:""}),[j,m]=Object(s.useState)({}),{username:u,password:b}=r,g=Object(h.f)();function _(e){i({...r,[e.target.name]:e.target.value})}return Object(f.jsxs)(f.Fragment,{children:[t&&Object(f.jsx)(F.a,{variant:"success",className:"mt-3 text-center",children:"Registration successful! Please log in."}),n&&Object(f.jsx)(F.a,{variant:"info",className:"mt-3 text-center",children:"You have been logged out."}),Object(f.jsx)(d.a,{className:"d-flex justify-content-center",children:Object(f.jsx)("div",{className:je.a.gradient,children:Object(f.jsx)("div",{className:je.a.gradientOverlay,children:Object(f.jsxs)("div",{className:je.a.splitBox,children:[Object(f.jsxs)("div",{className:je.a.formBox,children:[Object(f.jsx)("h2",{className:je.a.AuthTitle,children:"LOGIN"}),Object.keys(j).length>0&&Object(f.jsx)("div",{className:je.a.ErrorBox,children:Object(f.jsx)("ul",{className:"mb-0 ps-3",children:Object.values(j).flat().map(((e,t)=>Object(f.jsx)("li",{children:e},t)))})}),Object(f.jsxs)(Z.a,{onSubmit:async function(e){e.preventDefault();try{const{data:e}=await O.a.post("/dj-rest-auth/login/",r);localStorage.setItem("access_token",e.access_token),localStorage.setItem("refresh_token",e.refresh_token);const{data:t}=await x.get("/dj-rest-auth/user/");o(t),g.push("/")}catch(a){var t;m((null===(t=a.response)||void 0===t?void 0:t.data)||{})}},className:je.a.FormWrapper,children:[Object(f.jsxs)(Z.a.Group,{controlId:"username",className:je.a.FormGroupSpacing,children:[Object(f.jsx)(Z.a.Label,{className:"d-none",children:"Username"}),Object(f.jsx)(Z.a.Control,{type:"text",placeholder:"Username",name:"username",value:u,onChange:_})]}),Object(f.jsxs)(Z.a.Group,{controlId:"password",className:je.a.FormGroupSpacing,children:[Object(f.jsx)(Z.a.Label,{className:"d-none",children:"Password"}),Object(f.jsx)(Z.a.Control,{type:"password",placeholder:"Password",name:"password",value:b,onChange:_})]}),Object(f.jsx)(I.a,{type:"submit",className:`${l.a.YellowButton} ${je.a.CenteredButton}`,children:"Submit"})]}),Object(f.jsxs)("div",{className:je.a.AuthLink,children:["OR",Object(f.jsx)(p.b,{to:"/register",className:je.a.AuthLinkHighlight,children:"Sign up!"})]})]}),Object(f.jsx)("div",{className:je.a.imageBox,children:Object(f.jsx)("img",{src:me,alt:"Sign in illustration",className:je.a.AuthImage})})]})})})})]})},he=a.p+"static/media/register_pic.769add72.jpg";var pe=function(){const[e,t]=Object(s.useState)({username:"",password1:"",password2:""}),[a,n]=Object(s.useState)({}),{username:c,password1:o,password2:r}=e,i=Object(h.f)();function j(a){t({...e,[a.target.name]:a.target.value})}return Object(f.jsx)(d.a,{className:"d-flex justify-content-center",children:Object(f.jsx)("div",{className:je.a.gradient,children:Object(f.jsx)("div",{className:je.a.gradientOverlay,children:Object(f.jsxs)("div",{className:je.a.splitBox,children:[Object(f.jsxs)("div",{className:je.a.formBox,children:[Object(f.jsx)("h2",{className:je.a.AuthTitle,children:"Register"}),Object(f.jsxs)(Z.a,{onSubmit:async function(t){t.preventDefault();try{await x.post("/dj-rest-auth/registration/",e),i.push("/login?registered=true")}catch(s){var a;n((null===(a=s.response)||void 0===a?void 0:a.data)||{})}},className:je.a.FormWrapper,children:[Object.keys(a).length>0&&Object(f.jsx)("div",{className:je.a.ErrorBox,children:Object(f.jsx)("ul",{className:"mb-0 ps-3",children:Object.values(a).flat().map(((e,t)=>Object(f.jsx)("li",{children:e},t)))})}),Object(f.jsxs)(Z.a.Group,{controlId:"username",className:je.a.FormGroupSpacing,children:[Object(f.jsx)(Z.a.Label,{className:"d-none",children:"Username"}),Object(f.jsx)(Z.a.Control,{type:"text",placeholder:"Username",name:"username",value:c,onChange:j})]}),Object(f.jsxs)(Z.a.Group,{controlId:"password1",className:je.a.FormGroupSpacing,children:[Object(f.jsx)(Z.a.Label,{className:"d-none",children:"Password"}),Object(f.jsx)(Z.a.Control,{type:"password",placeholder:"Password",name:"password1",value:o,onChange:j})]}),Object(f.jsxs)(Z.a.Group,{controlId:"password2",className:je.a.FormGroupSpacing,children:[Object(f.jsx)(Z.a.Label,{className:"d-none",children:"Confirm Password"}),Object(f.jsx)(Z.a.Control,{type:"password",placeholder:"Confirm Password",name:"password2",value:r,onChange:j})]}),Object(f.jsx)(I.a,{type:"submit",className:`${l.a.YellowButton} ${je.a.CenteredButton}`,children:"Submit"})]}),Object(f.jsxs)("div",{className:je.a.AuthLink,children:["OR",Object(f.jsx)(p.b,{to:"/login",className:je.a.AuthLinkHighlight,children:"Log In!"})]})]}),Object(f.jsx)("div",{className:je.a.imageBox,children:Object(f.jsx)("img",{src:he,alt:"Register illustration",className:je.a.AuthImage})})]})})})})};var be=function(){return Object(f.jsxs)("div",{className:l.a.App,children:[Object(f.jsx)(P,{}),Object(f.jsx)(d.a,{className:l.a.Main,children:Object(f.jsxs)(h.c,{children:[Object(f.jsx)(h.a,{exact:!0,path:"/",component:Q}),Object(f.jsx)(h.a,{exact:!0,path:"/posts/create",component:ae}),Object(f.jsx)(h.a,{exact:!0,path:"/posts/:id",component:ne}),Object(f.jsx)(h.a,{exact:!0,path:"/posts/:id/edit",component:ce}),Object(f.jsx)(h.a,{exact:!0,path:"/nominations/create",component:oe}),Object(f.jsx)(h.a,{exact:!0,path:"/nominations/:id",component:re}),Object(f.jsx)(h.a,{exact:!0,path:"/nominations/:id/edit",component:le}),Object(f.jsx)(h.a,{exact:!0,path:"/profile",component:ie}),Object(f.jsx)(h.a,{exact:!0,path:"/login",component:ue}),Object(f.jsx)(h.a,{exact:!0,path:"/register",component:pe}),Object(f.jsx)(h.a,{render:()=>Object(f.jsx)("p",{children:"Page not found"})})]})})]})};var Oe=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,133)).then((t=>{let{getCLS:a,getFID:s,getFCP:n,getLCP:c,getTTFB:o}=t;a(e),s(e),n(e),c(e),o(e)}))};o.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(p.a,{children:Object(f.jsx)(w,{children:Object(f.jsx)(be,{})})})}),document.getElementById("root")),Oe()},14:function(e,t,a){e.exports={FormWrapper:"PostForm_FormWrapper__36o49",FormGroupSpacing:"PostForm_FormGroupSpacing__2YMOe",CurrentImage:"PostForm_CurrentImage__3gjY8",RemoveImageCheckbox:"PostForm_RemoveImageCheckbox__2Gu0U",FormButtonRow:"PostForm_FormButtonRow__ISUGS",FormMediaWrapper:"PostForm_FormMediaWrapper__3Ey43",FormImagePreview:"PostForm_FormImagePreview__2Oka5",SuggestionBox:"PostForm_SuggestionBox__34k9g",SuggestionItem:"PostForm_SuggestionItem__2asAs"}},16:function(e,t,a){e.exports={App:"App_App__1lbrG",Main:"App_Main__1eJsZ",YellowButton:"App_YellowButton__1Qzej",BlueButton:"App_BlueButton__2jV1c",FeedToggleActive:"App_FeedToggleActive__MJwR9",FeedToggleInactive:"App_FeedToggleInactive__3YfeF"}},35:function(e,t,a){e.exports={FeedContent:"LoggedInHomePage_FeedContent__2SnIt",FeedToggleButtons:"LoggedInHomePage_FeedToggleButtons__MbDKu",FeedButton:"LoggedInHomePage_FeedButton__1ld06",PostCard:"LoggedInHomePage_PostCard__3j1LI",PeopleSidebar:"LoggedInHomePage_PeopleSidebar__2aDrJ",PersonItem:"LoggedInHomePage_PersonItem__Z_A4D"}},64:function(e,t,a){e.exports={DropdownToggle:"MoreDropdown_DropdownToggle__h1s3T",DropdownItem:"MoreDropdown_DropdownItem__m5TH-"}},79:function(e,t,a){e.exports={Navbar:"NavBar_Navbar__1-xmk","nav-link":"NavBar_nav-link__3OyqH"}},8:function(e,t,a){e.exports={CardWrapper:"PostCard_CardWrapper__1aPfU",AvatarPlaceholder:"PostCard_AvatarPlaceholder__aALdP",PostTitle:"PostCard_PostTitle__amYVY",PostContent:"PostCard_PostContent__1mF67",ViewFullPostWrapper:"PostCard_ViewFullPostWrapper__6ZfRw",ViewFullPostLink:"PostCard_ViewFullPostLink__1MjBC",PostFooter:"PostCard_PostFooter__3RbvB",PostChildren:"PostCard_PostChildren__7MF44",ActionItem:"PostCard_ActionItem__1_YXt",Clickable:"PostCard_Clickable__3KGDz",TagSection:"PostCard_TagSection__32VHi",PostImage:"PostCard_PostImage__2S_6F",CommentSpacer:"PostCard_CommentSpacer__26KPu",CommentBlock:"PostCard_CommentBlock__1p5IP",CommentAuthor:"PostCard_CommentAuthor__1lF-Y",CommentText:"PostCard_CommentText__3V5U6",CommentDate:"PostCard_CommentDate__1RavQ"}},89:function(e,t,a){}},[[119,1,2]]]);
//# sourceMappingURL=main.2a0b8dcd.chunk.js.map