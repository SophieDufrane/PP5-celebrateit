(this.webpackJsonpmoments=this.webpackJsonpmoments||[]).push([[0],{10:function(e,t,a){e.exports={FormWrapper:"AuthForm_FormWrapper__2_2G7",FormGroupSpacing:"AuthForm_FormGroupSpacing__2YsuF",CenteredButton:"AuthForm_CenteredButton__mPhxp",AuthLink:"AuthForm_AuthLink__2nuPw",AuthLinkHighlight:"AuthForm_AuthLinkHighlight__2veRz",gradient:"AuthForm_gradient__4bNq5",gradientOverlay:"AuthForm_gradientOverlay__1aP-S",splitBox:"AuthForm_splitBox__3Qoc9",formBox:"AuthForm_formBox__2Tlgu",imageBox:"AuthForm_imageBox__1jRNM",AuthImage:"AuthForm_AuthImage__1OpaW",AuthTitle:"AuthForm_AuthTitle__tI1Xj",ErrorBox:"AuthForm_ErrorBox__2o8wb"}},11:function(e,t,a){e.exports={FormWrapper:"PostForm_FormWrapper__36o49",FormGroupSpacing:"PostForm_FormGroupSpacing__2YMOe",FormButtonRow:"PostForm_FormButtonRow__ISUGS",FormMediaWrapper:"PostForm_FormMediaWrapper__3Ey43",FormImagePreview:"PostForm_FormImagePreview__2Oka5",CurrentImage:"PostForm_CurrentImage__3gjY8",RemoveImageCheckbox:"PostForm_RemoveImageCheckbox__2Gu0U",SuggestionBox:"PostForm_SuggestionBox__34k9g",SuggestionItem:"PostForm_SuggestionItem__2asAs",ReadOnlyWrapper:"PostForm_ReadOnlyWrapper__23vz9",ReadOnlyInput:"PostForm_ReadOnlyInput__32TL0"}},123:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(26),c=a.n(r),o=(a(74),a(9)),i=a(87),l=a(13),d=a(28),m=a.n(d),j=a(133),u=a(134),p=a(84),b=a.n(p),h=a(30),O=a.n(h);O.a.defaults.baseURL="/api",O.a.defaults.headers.post["Content-Type"]="multipart/form-data",O.a.defaults.withCredentials=!0;const g=O.a.create(),x=O.a.create();var _=a(85);const f=()=>{localStorage.removeItem("refreshTokenTimestamp")};var v=a(1);const N=Object(n.createContext)(),y=Object(n.createContext)(),C=()=>Object(n.useContext)(N),S=()=>Object(n.useContext)(y);function w(e){let{children:t}=e;const[a,s]=Object(n.useState)(null),[r,c]=Object(n.useState)(!1),o=Object(l.f)(),i=Object(n.useRef)(null),d=Object(n.useRef)(null);return Object(n.useEffect)((()=>{(async()=>{try{const{data:e}=await x.get("dj-rest-auth/user/");s(e)}catch(e){}finally{c(!0)}})();const e=setInterval((()=>{x.get("/dj-rest-auth/user/").then((e=>{let{data:t}=e;s(t)})).catch((()=>{}))}),3e5);return()=>clearInterval(e)}),[]),Object(n.useEffect)((()=>(g.interceptors.request.use((e=>{const t=localStorage.getItem("access_token");return t&&a?e.headers.Authorization=`Bearer ${t}`:delete e.headers.Authorization,e}),(e=>Promise.reject(e))),i.current=g.interceptors.request.use((async e=>{const t=e._isRefreshing;if(!localStorage.getItem("refresh_token"))return e;if(localStorage.getItem("refreshTokenTimestamp")&&!t)try{const{data:e}=await O.a.post("/dj-rest-auth/token/refresh/");if(localStorage.setItem("access_token",e.access),g.defaults.headers.common.Authorization=`Bearer ${e.access}`,!a){const{data:e}=await x.get("/dj-rest-auth/user/");s(e)}}catch(n){return s((e=>(e&&o.push("/signin"),null))),f(),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),e}return e}),(e=>Promise.reject(e))),d.current=x.interceptors.response.use((e=>e),(async e=>{var t;if(401===(null===(t=e.response)||void 0===t?void 0:t.status))try{const{data:t}=await O.a.post("/dj-rest-auth/token/refresh/");localStorage.setItem("access_token",t.access),g.defaults.headers.common.Authorization=`Bearer ${t.access}`,e.config.headers={...e.config.headers,Authorization:`Bearer ${t.access}`};const{data:a}=await x.get("/dj-rest-auth/user/");return s(a),g(e.config)}catch(e){return console.warn("TOKEN REFRESH FAILED \u2014 Forcing logout."),s((e=>(e&&o.push("/signin"),null))),f(),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),Promise.reject(e)}return Promise.reject(e)})),()=>{null!==i.current&&g.interceptors.request.eject(i.current),null!==d.current&&x.interceptors.response.eject(d.current)})),[o,a]),Object(v.jsx)(N.Provider,{value:{currentUser:a,currentUserLoaded:r},children:Object(v.jsx)(y.Provider,{value:s,children:t})})}var F=function(){const{currentUser:e,currentUserLoaded:t}=C(),a=S(),[s,r]=Object(n.useState)(!1);return Object(v.jsx)(j.a,{className:b.a.Navbar,expand:"md",fixed:"top",expanded:s,onToggle:()=>r((e=>!e)),children:Object(v.jsxs)(i.a,{children:[Object(v.jsxs)(j.a.Brand,{as:o.c,to:"/",children:["CelebrateIt"," ",null!==e&&void 0!==e&&e.first_name||null!==e&&void 0!==e&&e.username?`| ${e.first_name||e.username}`:""]}),Object(v.jsx)(j.a.Toggle,{"aria-controls":"basic-navbar-nav",className:"custom-toggler"}),Object(v.jsx)(j.a.Collapse,{id:"basic-navbar-nav",children:Object(v.jsxs)(u.a,{className:"ml-auto text-left",children:[Object(v.jsx)(u.a.Link,{as:o.c,exact:!0,to:"/",onClick:()=>r(!1),children:"Home"}),e&&e?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(o.c,{to:"/recognitions/create",className:"nav-link",onClick:()=>r(!1),children:"Recognize"}),Object(v.jsx)(o.c,{to:"/nominations/create",className:"nav-link",onClick:()=>r(!1),children:"Nominate"}),e.profile_id&&Object(v.jsx)(o.c,{to:`/profiles/${e.profile_id}`,className:"nav-link",onClick:()=>r(!1),children:"Profile"}),Object(v.jsx)(u.a.Link,{as:o.c,to:"/",onClick:()=>{r(!1),(async()=>{try{await g.post("/dj-rest-auth/logout/"),a(null),f(),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.assign("/")}catch(e){}})()},children:"Logout"})]}):t?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(u.a.Link,{as:o.c,to:"/login",onClick:()=>r(!1),children:"Log In"}),Object(v.jsx)(u.a.Link,{as:o.c,to:"/register",onClick:()=>r(!1),children:"Register"})]}):null]})})]})})},k=a(127),P=a(128),I=a(89),T=a(88),A=a(136),$=a(132),L=a(126),B=a(131),D=a(67),E=a.n(D);const R=s.a.forwardRef(((e,t)=>{let{onClick:a}=e;return Object(v.jsx)("i",{className:`fas fa-ellipsis-v ${E.a.DropdownToggle}`,ref:t,onClick:e=>{e.preventDefault(),a(e)},role:"button","aria-label":"options"})}));var U=function(e){let{handleEdit:t,handleDelete:a}=e;return Object(v.jsxs)(B.a,{align:"end",children:[Object(v.jsx)(B.a.Toggle,{as:R}),Object(v.jsxs)(B.a.Menu,{children:[t&&Object(v.jsxs)(B.a.Item,{className:E.a.DropdownItem,onClick:t,children:[Object(v.jsx)("i",{className:"fas fa-edit"}),"Edit"]}),a&&Object(v.jsxs)(B.a.Item,{className:E.a.DropdownItem,onClick:a,children:[Object(v.jsx)("i",{className:"fas fa-trash-alt"}),"Delete"]})]})]})},W=a(129);var H=function(e){let{show:t,onHide:a,onConfirm:n,message:s="Are you sure you want to delete this?"}=e;return Object(v.jsxs)(W.a,{show:t,onHide:a,centered:!0,children:[Object(v.jsx)(W.a.Header,{closeButton:!0,children:Object(v.jsx)(W.a.Title,{children:"Confirm Deletion"})}),Object(v.jsx)(W.a.Body,{children:s}),Object(v.jsxs)(W.a.Footer,{children:[Object(v.jsx)(T.a,{variant:"secondary",onClick:a,children:"Cancel"}),Object(v.jsx)(T.a,{variant:"danger",onClick:n,children:"Delete"})]})]})},G=a(8),M=a.n(G),Y=a(135),z=a(51),V=a.n(z);var Z=function(e){const{src:t,alt:a,size:n,first_name:s,last_name:r,username:c}=e,o=n||"md",i=a||"avatar";return t?Object(v.jsx)("img",{src:t,alt:i,className:`${V.a.Avatar} ${V.a[o]}`}):Object(v.jsx)("div",{className:`${V.a.AvatarFallback} ${V.a[o]}`,children:s&&r?`${s[0]}${r[0]}`.toUpperCase():s?s[0].toUpperCase():r?r[0].toUpperCase():c?c[0].toUpperCase():"?"})};var K=function(e){const{profile_image:t,username:a,first_name:n,last_name:s,display_name:r,created_at:c,renderDropdown:o}=e;return Object(v.jsxs)("div",{className:M.a.PostHeaderWrapper,children:[Object(v.jsx)("div",{className:M.a.HeaderLeft,children:Object(v.jsxs)("div",{className:M.a.AvatarWithName,children:[Object(v.jsx)(Z,{src:t,first_name:n,last_name:s,username:a,size:"md"}),Object(v.jsx)("strong",{children:r})]})}),Object(v.jsxs)("div",{className:"d-flex align-items-center",children:[Object(v.jsx)("small",{className:"text-muted me-2",children:c}),o]})]})};var q=function(e){const{title:t,content:a,user:n,username:s,first_name:r,last_name:c,display_name:i,profile_image:l,profile_id:d,created_at:m,renderDropdown:j,postActions:u,children:p,extraContent:b,linkTo:h,metaTop:O}=e,g=Object(v.jsxs)(Y.a.Body,{children:[Object(v.jsx)(K,{display_name:d?Object(v.jsx)(o.b,{to:`/profiles/${d}`,className:M.a.InteractiveNameLink,children:i}):i,profile_image:l,user:n,username:s,first_name:r,last_name:c,created_at:m,renderDropdown:j}),O&&Object(v.jsx)("div",{className:M.a.MetaTopWrapper,children:O}),Object(v.jsx)("h5",{className:M.a.PostTitle,children:t}),Object(v.jsx)("p",{className:M.a.PostContent,children:a}),b&&Object(v.jsx)("div",{className:M.a.ViewFullWrapper,children:b}),p&&Object(v.jsx)("div",{className:M.a.PostChildren,children:p})]});return Object(v.jsxs)(Y.a,{className:`mb-3 ${M.a.CardWrapper}`,children:[h?Object(v.jsx)(o.b,{to:h,style:{textDecoration:"none",color:"inherit"},children:g}):g,u]})};var X=function(e){const{id:t,title:a,content:s,image:r,user:c,username:i,first_name:d,last_name:m,display_name:j,profile_image:u,profile_id:p,created_at:b,likes_count:h,comments_count:O,like_id:_,setRecognitions:f,onPostDelete:N,detailUrl:y=`/recognitions/${t}`,editUrl:S=`/recognitions/${t}/edit`,deleteUrl:w=`/posts/${t}/`}=e,{currentUser:F,currentUserLoaded:k}=C(),P=Object(l.f)(),[I,T]=Object(n.useState)(!1);if(!k)return null;const A=s.length>150?`${s.slice(0,s.slice(0,150).lastIndexOf(" "))}...`:s,B=Object(v.jsxs)("div",{className:M.a.PostFooter,children:[Object(v.jsxs)("div",{className:M.a.ActionItem,children:[e.is_user?Object(v.jsx)($.a,{placement:"top",overlay:Object(v.jsx)(L.a,{id:`tooltip-self-like-${t}`,children:"Can't like your own recognition!"}),children:Object(v.jsx)("span",{className:M.a.DisabledIcon,"aria-label":"You can't like your own recognition",children:Object(v.jsx)("i",{className:"far fa-thumbs-up"})})}):_?Object(v.jsx)("span",{onClick:async()=>{try{await x.delete(`/likes/${_}/`),f((e=>e.map((e=>e.id===t?{...e,likes_count:e.likes_count-1,like_id:null}:e))))}catch(e){}},className:`${M.a.ActionItem} ${M.a.Clickable}`,"aria-label":"Unlike this recognition",children:Object(v.jsx)("i",{className:`fas fa-thumbs-up ${M.a.Heart} ${M.a.Clickable}`})}):F?Object(v.jsx)("span",{onClick:async()=>{try{const{data:e}=await x.post("/likes/",{post:t});f((a=>a.map((a=>a.id===t?{...a,likes_count:a.likes_count+1,like_id:e.id}:a))))}catch(e){}},className:`${M.a.ActionItem} ${M.a.Clickable}`,"aria-label":"Like this recognition",children:Object(v.jsx)("i",{className:`far fa-thumbs-up ${M.a.HeartOutline} ${M.a.Clickable}`})}):Object(v.jsx)($.a,{placement:"top",overlay:Object(v.jsx)(L.a,{id:`tooltip-login-like-${t}`,children:"Log in to like recognitions!"}),children:Object(v.jsx)("span",{className:M.a.DisabledIcon,"aria-label":"Log in to like this recognition",children:Object(v.jsx)("i",{className:"far fa-thumbs-up"})})}),Object(v.jsx)("span",{children:h})]}),Object(v.jsxs)(o.b,{to:`/recognitions/${t}`,className:`${M.a.ActionItem} ${M.a.Clickable}`,children:[Object(v.jsx)("i",{className:"far fa-comment"}),Object(v.jsx)("span",{children:O})]})]});return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(q,{title:a,content:A,user:c,username:i,first_name:d,last_name:m,display_name:j,profile_image:u,profile_id:p,created_at:b,likes_count:h,comments_count:O,renderDropdown:e.is_user&&Object(v.jsx)(U,{handleEdit:()=>P.push(S),handleDelete:()=>T(!0)}),postActions:B,extraContent:Object(v.jsx)(o.b,{to:y,className:M.a.InteractiveTextLink,children:"View full recognition"}),children:r&&Object(v.jsx)("div",{className:M.a.ImageWrapper,children:Object(v.jsx)("img",{src:r,alt:a,className:M.a.PostImage})})}),Object(v.jsx)(H,{show:I,onHide:()=>T(!1),onConfirm:async()=>{try{await g.delete(w),N&&N(t),P.push("/?deleted=true")}catch(e){}finally{T(!1)}}})]})};var Q=function(e){const{id:t,title:a,content:s,user:r,username:c,first_name:i,last_name:d,display_name:m,profile_image:j,profile_id:u,nominee_profile_id:p,created_at:b,nominee_display_name:h,tag:O,tag_color:x,onPostDelete:_,detailUrl:f=`/nominations/${t}`,editUrl:N=`/nominations/${t}/edit`,deleteUrl:y=`/nominations/${t}/`}=e,{currentUserLoaded:S}=C(),w=Object(l.f)(),[F,k]=Object(n.useState)(!1);if(!S)return null;const P=s.length>150?`${s.slice(0,s.slice(0,150).lastIndexOf(" "))}...`:s;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(q,{title:a,content:P,user:r,username:c,first_name:i,last_name:d,display_name:m,profile_image:j,profile_id:u,nominee_profile_id:p,created_at:b,renderDropdown:e.is_user&&Object(v.jsx)(U,{handleEdit:()=>w.push(N),handleDelete:()=>k(!0)}),metaTop:h&&O&&Object(v.jsxs)("p",{className:M.a.NominationMeta,children:[p?Object(v.jsx)(o.b,{to:`/profiles/${p}`,className:M.a.InteractiveNameLink,children:Object(v.jsx)("strong",{children:h})}):Object(v.jsx)("strong",{children:h})," ","was nominated by ",Object(v.jsx)("strong",{children:m})," ",Object(v.jsx)("span",{className:M.a.Tag,style:{backgroundColor:x},children:O})]}),extraContent:Object(v.jsx)(o.b,{to:f,className:M.a.InteractiveTextLink,children:"View full nomination"})}),Object(v.jsx)(H,{show:F,onHide:()=>k(!1),onConfirm:async()=>{try{await g.delete(y),_&&_(t),w.push("/?deleted=true")}catch(e){}finally{k(!1)}}})]})},J=a(68),ee=a.n(J);var te=function(e){let{message:t="Loading..."}=e;return Object(v.jsxs)("div",{className:ee.a.LoaderWrapper,children:[Object(v.jsx)("div",{className:ee.a.Spinner}),Object(v.jsx)("p",{className:ee.a.Message,children:t})]})},ae=a(18),ne=a.n(ae);var se=function(){const e=Object(l.g)(),t=Object(l.f)(),{currentUser:a,currentUserLoaded:s}=C();Object(n.useEffect)((()=>{console.log("HomeFeedPage re-evaluated currentUser:",a)}),[a]);const[r,c]=Object(n.useState)(!1),[o,d]=Object(n.useState)(!1),[m,j]=Object(n.useState)(!1),[u,p]=Object(n.useState)(""),[b,h]=Object(n.useState)(""),[O,x]=Object(n.useState)([]),[_,f]=Object(n.useState)([]),[N,y]=Object(n.useState)([]);return Object(n.useEffect)((()=>{const t="true"===new URLSearchParams(e.search).get("deleted");c(t)}),[e.search]),Object(n.useEffect)((()=>{if(r){const e=setTimeout((()=>c(!1)),4e3);return()=>clearTimeout(e)}}),[r]),Object(n.useEffect)((()=>{g.get("/posts/").then((e=>x(e.data.results))).catch((e=>{})).finally((()=>j(!0)))}),[]),Object(n.useEffect)((()=>{g.get("/nominations/").then((e=>f(e.data.results))).catch((e=>{}))}),[]),Object(n.useEffect)((()=>{g.get("/user-profiles/").then((e=>y(e.data.results||e.data))).catch((e=>{}))}),[]),s?Object(v.jsxs)(i.a,{children:[r&&Object(v.jsx)(k.a,{variant:"success",onClose:()=>c(!1),dismissible:!0,children:"The post has been deleted successfully."}),Object(v.jsxs)(P.a,{children:[Object(v.jsx)(I.a,{md:8,children:Object(v.jsxs)("div",{className:ne.a.FeedContent,children:[Object(v.jsxs)("div",{className:ne.a.FeedToggleButtons,children:[Object(v.jsx)(T.a,{variant:"none",className:`${ne.a.FeedButton} ${o?ne.a.FeedToggleInactive:ne.a.FeedToggleActive}`,onClick:()=>d(!1),children:"Recognition Stories"}),Object(v.jsx)(T.a,{variant:"none",className:`${ne.a.FeedButton} ${o?ne.a.FeedToggleActive:ne.a.FeedToggleInactive}`,onClick:()=>d(!0),children:"Nominations"})]}),m?Object(v.jsx)(v.Fragment,{children:o?_.length?_.map((e=>Object(v.jsx)(Q,{...e,nominator:e.nominator,setPosts:f,onPostDelete:e=>f((t=>t.filter((t=>t.id!==e))))},`nom-${e.id}`))):Object(v.jsx)("div",{children:"No nominations yet"}):O.length?O.map((e=>Object(v.jsx)(X,{...e,user:e.user,setRecognitions:x,onPostDelete:e=>x((t=>t.filter((t=>t.id!==e))))},`post-${e.id}`))):Object(v.jsx)("div",{children:"No recognitions yet"})}):Object(v.jsx)(te,{message:"Loading feed..."})]})}),Object(v.jsxs)(I.a,{md:4,className:ne.a.SidebarWrapper,children:[Object(v.jsxs)("div",{className:ne.a.SearchFilterBlock,children:[Object(v.jsx)("input",{type:"text",className:ne.a.FilterInput,placeholder:"Search people...",value:u,onChange:e=>p(e.target.value)}),Object(v.jsxs)("select",{className:ne.a.FilterSelect,value:b,onChange:e=>h(e.target.value),children:[Object(v.jsx)("option",{value:"",children:"All Departments"}),[...new Set(N.map((e=>e.department)).filter(Boolean))].map((e=>Object(v.jsx)("option",{value:e,children:e},e)))]})]}),Object(v.jsx)("div",{className:ne.a.PeopleList,children:N.filter((e=>{const t=`${e.first_name||""} ${e.last_name||""} ${e.user||""}`.toLowerCase().includes(u.toLowerCase()),a=!b||e.department===b;return t&&a})).map((e=>Object(v.jsx)(A.a.Item,{className:ne.a.PersonItem,onClick:()=>t.push(`/profiles/${e.id}`),style:{cursor:"pointer"},children:Object(v.jsxs)("div",{className:ne.a.PersonContent,children:[Object(v.jsx)(Z,{src:e.profile_image,first_name:e.first_name,last_name:e.last_name,username:e.user,size:"sm"}),Object(v.jsx)("span",{children:e.first_name||e.last_name?`${e.first_name||""} ${e.last_name||""}`.trim():e.user})]})},e.id)))})]})]})]}):Object(v.jsx)(te,{message:"Loading..."})},re=a(130),ce=a(11),oe=a.n(ce);var ie=function(e){const t=Object(l.f)(),{submitText:a="Submit",onCancel:n,disabled:s=!1,showCancel:r=!0}=e;return Object(v.jsxs)("div",{className:oe.a.FormButtonRow,children:[Object(v.jsx)(T.a,{type:"submit",className:m.a.YellowButton,disabled:s,children:a}),r&&Object(v.jsx)(T.a,{className:m.a.BlueButton,variant:"outline-secondary",onClick:n||(()=>t.goBack()),children:"Cancel"})]})};var le=function(e){var t,a;let{title:n,content:s,handleChange:r,handleSubmit:c,children:o,submitText:i="Submit",onCancel:l,errors:d}=e;return Object(v.jsxs)(re.a,{onSubmit:c,className:oe.a.FormWrapper,children:[Object(v.jsxs)(re.a.Group,{controlId:"title",className:oe.a.FormGroupSpacing,children:[Object(v.jsx)($.a,{placement:"top",overlay:Object(v.jsx)(L.a,{children:"Enter a short, clear post title"}),children:Object(v.jsx)(re.a.Control,{type:"text",placeholder:"Enter title",name:"title","aria-label":"Enter a short, clear post title",value:n,onChange:r})}),Array.isArray(null===d||void 0===d?void 0:d.title)&&(null===d||void 0===d||null===(t=d.title)||void 0===t?void 0:t.map(((e,t)=>Object(v.jsx)("div",{className:"text-danger mt-1",children:e},t))))]}),Object(v.jsxs)(re.a.Group,{controlId:"content",className:oe.a.FormGroupSpacing,children:[Object(v.jsx)($.a,{placement:"top",overlay:Object(v.jsx)(L.a,{children:"Write the story you want to share"}),children:Object(v.jsx)(re.a.Control,{as:"textarea",rows:10,placeholder:"Write your story...",name:"content","aria-label":"Write the story you want to share",value:s,onChange:r})}),Array.isArray(null===d||void 0===d?void 0:d.content)&&(null===d||void 0===d||null===(a=d.content)||void 0===a?void 0:a.map(((e,t)=>Object(v.jsx)("div",{className:"text-danger mt-1",children:e},t))))]}),o,Object(v.jsx)(ie,{submitText:i,onCancel:l})]})};var de=function(){const[e,t]=Object(n.useState)({title:"",content:"",image:null}),{title:a,content:s,image:r}=e,[c,o]=Object(n.useState)({}),d=Object(l.f)(),m=S(),j=a=>{const{name:n,value:s,files:r}=a.target;if(n&&o((e=>({...e,[n]:""}))),"image"===n){const a=r[0];if(a&&a.size>5242880)return void alert("Image must be smaller than 5MB.");t({...e,image:r[0]})}else t({...e,[n]:s})};return Object(v.jsx)(i.a,{children:Object(v.jsx)(le,{title:a,content:s,handleChange:j,handleSubmit:async e=>{e.preventDefault();const t=new FormData;t.append("title",a),t.append("content",s),r&&t.append("image",r);try{const{data:e}=await g.post("/posts/",t,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"multipart/form-data"}}),a=await x.get("/dj-rest-auth/user/").then((e=>e.data));m(a),d.push(`/recognitions/${e.id}?created=true`)}catch(i){var n,c;if(401!==(null===(n=i.response)||void 0===n?void 0:n.status))o(null===(c=i.response)||void 0===c?void 0:c.data)}},submitText:"Create",onCancel:()=>d.push("/"),errors:c,children:Object(v.jsx)(re.a.Group,{controlId:"image",className:oe.a.FormMediaWrapper,children:Object(v.jsx)($.a,{placement:"top",overlay:Object(v.jsx)(L.a,{children:"Upload an image (optional)"}),children:Object(v.jsx)(re.a.Control,{type:"file",name:"image",onChange:j,"aria-label":"Upload an optional image"})})})})})};var me=function(e){let{postId:t,onCommentSubmit:a,disabled:s=!1}=e;const[r,c]=Object(n.useState)(""),[o,i]=Object(n.useState)({}),l=r.trim().length>0,d=e=>{c(e.target.value)};return Object(v.jsxs)(re.a,{onSubmit:async e=>{e.preventDefault();try{const{data:e}=await g.post("/comments/",{content:r,post:t});c(""),i({}),a&&a(e)}catch(s){var n;i((null===(n=s.response)||void 0===n?void 0:n.data)||{})}},className:oe.a.FormWrapper,children:[Object(v.jsxs)(re.a.Group,{controlId:"commentText",className:oe.a.FormGroupSpacing,children:[s?Object(v.jsx)(re.a.Control,{as:"textarea",rows:2,placeholder:"Log in to comment",name:"comment",disabled:!0,"aria-label":"Log in to comment",value:r,onChange:d}):Object(v.jsx)($.a,{placement:"top",overlay:Object(v.jsx)(L.a,{children:"Add your comment"}),children:Object(v.jsx)(re.a.Control,{as:"textarea",rows:2,placeholder:"Write a comment...",name:"comment","aria-label":"Add your comment",disabled:s,value:r,onChange:d})}),(null===o||void 0===o?void 0:o.content)&&Object(v.jsx)("div",{className:"text-danger mt-2",children:o.content})]}),Object(v.jsx)(ie,{submitText:"Post",disabled:s||!l,showCancel:!1})]})},je=a(33),ue=a.n(je);var pe=function(e){const{comment:t,setEditingComment:a,setShowDeleteModal:n}=e;return Object(v.jsxs)("div",{className:ue.a.SingleComment,children:[Object(v.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[Object(v.jsx)("strong",{className:ue.a.CommentAuthor,children:t.display_name}),t.is_user&&Object(v.jsx)(U,{handleEdit:()=>a(t),handleDelete:()=>n(t.id)})]}),Object(v.jsx)("p",{className:ue.a.CommentText,children:t.content}),Object(v.jsx)("small",{className:ue.a.CommentDate,children:t.created_at})]})};var be=function(e){const{comment:t,setComments:a,setEditingComment:s,onCancel:r}=e,c=Object(l.f)(),o=Object(l.g)(),[i,d]=Object(n.useState)(t.content),[m,j]=Object(n.useState)({});return Object(v.jsxs)(re.a,{onSubmit:async e=>{e.preventDefault();try{const{data:e}=await g.patch(`/comments/${t.id}/`,{content:i});a((a=>a.map((a=>a.id===t.id?e:a)))),s(null),c.replace(`${o.pathname}?comment_edited=true`)}catch(r){var n;j((null===(n=r.response)||void 0===n?void 0:n.data)||{})}},className:ue.a.SingleComment,children:[Object(v.jsxs)(re.a.Group,{children:[Object(v.jsx)(re.a.Control,{as:"textarea",value:i,onChange:e=>{d(e.target.value)},rows:2,className:ue.a.CommentText}),Array.isArray(null===m||void 0===m?void 0:m.content)&&m.content.map(((e,t)=>Object(v.jsx)("div",{className:"text-danger mt-1",children:e},t)))]}),Object(v.jsx)(ie,{submitText:"Update",onCancel:r})]})};var he=function(){const{id:e}=Object(l.h)(),t=Object(l.f)(),a=Object(l.g)(),{currentUser:s}=C(),[r,c]=Object(n.useState)(null),[d,m]=Object(n.useState)([]),[j,u]=Object(n.useState)(!1),[p,b]=Object(n.useState)(!1),[h,O]=Object(n.useState)(null),[_,f]=Object(n.useState)(null),N=!(null===r||void 0===r||!r.nominee);let y=null;const S=new URLSearchParams(a.search),w="true"===S.get("created"),F="true"===S.get("updated"),P="true"===S.get("comment_edited"),I="true"===S.get("comment_deleted"),T=w||F||P||I||p,A=w?"Your recognition has been published!":F?"Your recognition has been updated!":P?"Comment updated successfully!":I?"Comment deleted successfully!":p?"Comment posted successfully!":"";if(Object(n.useEffect)((()=>{if(T){const e=setTimeout((()=>{b(!1),t.replace(a.pathname)}),3e3);return()=>clearTimeout(e)}}),[T,t,a.pathname]),Object(n.useEffect)((()=>{g.get(`/posts/${e}/`).then((e=>{c(e.data)})).catch((e=>{}))}),[e]),Object(n.useEffect)((()=>{g.get(`/comments/?post=${e}`).then((e=>{m(e.data.results||e.data)})).catch((e=>{console.error("Error fetching comments:",e)}))}),[e,s]),!r)return Object(v.jsx)(i.a,{className:"d-flex justify-content-center py-5",children:Object(v.jsx)(te,{message:"Loading recognition..."})});y=r.is_user?Object(v.jsx)(U,{handleEdit:()=>t.push(`/recognitions/${r.id}/edit`),handleDelete:()=>{u(!0)}}):null;const B=N?null:Object(v.jsxs)("div",{className:M.a.PostFooter,children:[Object(v.jsxs)("div",{className:M.a.ActionItem,children:[r.is_user?Object(v.jsx)($.a,{placement:"top",overlay:Object(v.jsx)(L.a,{id:"tooltip-self-like",children:"Can't like your own recognition!"}),children:Object(v.jsx)("span",{style:{cursor:"not-allowed"},"aria-label":"You can't like your own recognition",children:Object(v.jsx)("i",{className:"far fa-thumbs-up"})})}):r.like_id?Object(v.jsx)("span",{onClick:async()=>{try{await x.delete(`/likes/${r.like_id}/`),c((e=>({...e,likes_count:e.likes_count-1,like_id:null})))}catch(e){}},style:{cursor:"pointer"},"aria-label":"Unlike this recognition",children:Object(v.jsx)("i",{className:`fas fa-thumbs-up ${M.a.Heart}`})}):s?Object(v.jsx)("span",{onClick:async()=>{try{const{data:e}=await x.post("/likes/",{post:r.id});c((t=>({...t,likes_count:t.likes_count+1,like_id:e.id})))}catch(e){}},style:{cursor:"pointer"},"aria-label":"Like this recognition",children:Object(v.jsx)("i",{className:`far fa-thumbs-up ${M.a.HeartOutline}`})}):Object(v.jsx)($.a,{placement:"top",overlay:Object(v.jsx)(L.a,{id:`tooltip-login-like-${r.id}`,children:"Log in to like recognitions!"}),children:Object(v.jsx)("span",{className:M.a.DisabledIcon,"aria-label":"Log in to like this recognition",children:Object(v.jsx)("i",{className:"far fa-thumbs-up"})})}),Object(v.jsx)("span",{children:r.likes_count})]}),Object(v.jsxs)("div",{className:M.a.ActionItem,children:[Object(v.jsx)("i",{className:"far fa-comment"}),Object(v.jsx)("span",{children:r.comments_count})]})]});return Object(v.jsxs)(i.a,{children:[T&&A&&Object(v.jsx)(k.a,{variant:"success",dismissible:!0,children:A}),Object(v.jsx)(q,{title:r.title,content:r.content,image:r.image,user:r.user,username:r.username,first_name:r.first_name,last_name:r.last_name,display_name:r.display_name,profile_image:r.profile_image,profile_id:r.profile_id,created_at:r.created_at,likes_count:r.likes_count,comments_count:r.comments_count,renderDropdown:y,postActions:B,children:Object(v.jsxs)(v.Fragment,{children:[r.image&&Object(v.jsx)("div",{className:M.a.ImageWrapper,children:Object(v.jsx)("img",{src:r.image,alt:r.title,className:M.a.PostImage})}),s?Object(v.jsx)(me,{postId:r.id,onCommentSubmit:e=>{m((t=>[e,...t])),c((e=>({...e,comments_count:e.comments_count+1}))),b(!0)}}):Object(v.jsxs)("p",{className:M.a.LoginToComment,children:[Object(v.jsx)("i",{className:"far fa-comment"}),Object(v.jsx)(o.b,{to:"/login",className:M.a.InteractiveTextLink,children:"Log in"}),"to leave a comment."]}),Object(v.jsx)("div",{className:ue.a.CommentSection}),d.length?d.map((e=>(null===h||void 0===h?void 0:h.id)===e.id?Object(v.jsx)("div",{className:M.a.CommentBlock,children:Object(v.jsx)(be,{comment:e,postId:r.id,setComments:m,setEditingComment:O,onCancel:()=>O(null)})},e.id):Object(v.jsx)(pe,{comment:e,setEditingComment:O,setShowDeleteModal:f},e.id))):Object(v.jsx)("p",{className:"text-muted px-3",children:"No comments yet."})]})}),Object(v.jsx)(H,{show:j,onHide:()=>u(!1),onConfirm:async()=>{try{await g.delete(`/posts/${r.id}/`),t.push("/?deleted=true")}catch(e){}finally{u(!1)}}}),Object(v.jsx)(H,{show:!!_,onHide:()=>f(null),onConfirm:async()=>{try{await g.delete(`/comments/${_}/`),m((e=>e.filter((e=>e.id!==_)))),c((e=>({...e,comments_count:e.comments_count-1}))),t.replace(`${a.pathname}?comment_deleted=true`)}catch(e){}finally{f(null)}}})]})};var Oe=function(){const{id:e}=Object(l.h)(),t=Object(l.f)(),[a,s]=Object(n.useState)({title:"",content:"",image:null}),[r,c]=Object(n.useState)(!1),{title:o,content:d,image:m}=a,[j,u]=Object(n.useState)(!1),[p,b]=Object(n.useState)({});Object(n.useEffect)((()=>{g.get(`/posts/${e}/`).then((e=>{const{title:t,content:a,image:n}=e.data;s({title:t,content:a,image:n}),u(!0)})).catch((e=>{console.error("Error fetching recognition:",e),t.push("/")}))}),[e,t]);const h=e=>{const{name:t,value:n,files:r}=e.target;t&&b((e=>({...e,[t]:""}))),s("image"===t?{...a,image:r[0]}:{...a,[t]:n})};return j?Object(v.jsx)(i.a,{children:Object(v.jsx)(le,{title:o,content:d,image:m,handleChange:h,handleSubmit:async a=>{a.preventDefault();const n=new FormData;n.append("title",o),n.append("content",d),r?n.append("image",""):m&&"string"!==typeof m&&n.append("image",m);try{await g.patch(`/posts/${e}/`,n,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"multipart/form-data"}}),t.push(`/recognitions/${e}?updated=true`)}catch(l){var s,c,i;if(console.error("Submission error:",null===(s=l.response)||void 0===s?void 0:s.data),401!==(null===(c=l.response)||void 0===c?void 0:c.status))b((null===(i=l.response)||void 0===i?void 0:i.data)||{})}},submitText:"Update",onCancel:()=>t.push(`/recognitions/${e}`),errors:p,children:Object(v.jsxs)(re.a.Group,{className:oe.a.FormMediaWrapper,children:["string"===typeof m&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("img",{src:m,alt:"Current",className:oe.a.FormImagePreview}),Object(v.jsxs)("div",{className:"d-flex align-items-center gap-2 mt-2 mb-3",children:[Object(v.jsx)(re.a.Check,{type:"checkbox",id:"remove-image",label:"","aria-label":"Remove image",checked:r,onChange:e=>c(e.target.checked)}),Object(v.jsx)(re.a.Label,{htmlFor:"remove-image",className:"mb-0",children:"Remove image"})]})]}),Object(v.jsx)($.a,{placement:"top",overlay:Object(v.jsx)(L.a,{children:"Upload an image (optional)"}),children:Object(v.jsx)(re.a.Control,{type:"file",name:"image",onChange:h,"aria-label":"Upload an image (optional)"})})]})})}):Object(v.jsx)(i.a,{className:"d-flex justify-content-center py-5",children:Object(v.jsx)(te,{message:"Loading recognition..."})})};var ge=function(){const[e,t]=Object(n.useState)({title:"",content:"",tag:""}),{title:a,content:s,tag:r}=e,[c,o]=Object(n.useState)(""),[d,m]=Object(n.useState)(""),[j,u]=Object(n.useState)([]),[p,b]=Object(n.useState)([]),[h,O]=Object(n.useState)({}),_=Object(l.f)(),f=Object(l.g)(),N=S(),y=C();Object(n.useEffect)((()=>{(async()=>{try{const{data:e}=await g.get("/tags/");b(e.results)}catch(e){}})()}),[]),Object(n.useEffect)((()=>{c?g.get(`/users/?search=${c}`).then((e=>{u(e.data.results)})).catch((e=>{})):u([])}),[c]),Object(n.useEffect)((()=>{const e=new URLSearchParams(f.search),t=e.get("name"),a=e.get("nominee");t&&a&&(o(t),m(parseInt(a)))}),[f.search]);const w=e=>{const{name:a,value:n}=e.target;a&&O((e=>({...e,[a]:""}))),"nominee"===a?(o(n),m("")):t((e=>({...e,[a]:n})))};return Object(v.jsx)(i.a,{children:Object(v.jsx)(le,{title:a,content:s,handleChange:w,handleSubmit:async e=>{var t;if(e.preventDefault(),parseInt(d)===(null===y||void 0===y||null===(t=y.currentUser)||void 0===t?void 0:t.pk))return O({nominee:["You can't nominate yourself."]}),o(""),m(""),void u([]);const n=new FormData;n.append("title",a),n.append("content",s),n.append("nominee",d),r&&n.append("tag",r);try{const{data:e}=await g.post("/nominations/",n,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"multipart/form-data"}});N(await x.get("/dj-rest-auth/user/").then((e=>e.data))),_.push(`/nominations/${e.id}?created=true`)}catch(i){var c;O((null===(c=i.response)||void 0===c?void 0:c.data)||{nominee:["Something went wrong."]})}},submitText:"Create",onCancel:()=>{_.push("/")},errors:h,children:Object(v.jsxs)(re.a.Group,{controlId:"nominee",className:oe.a.FormMediaWrapper,children:[Object(v.jsxs)("div",{className:"mb-3",children:[Object(v.jsx)($.a,{placement:"top",overlay:Object(v.jsx)(L.a,{children:"Search for a teammate by first or last name (you can't nominate yourself)"}),children:Object(v.jsx)(re.a.Control,{type:"text",name:"nominee",placeholder:"Start typing a name...","aria-label":"Search for a teammate by first or last name",value:c,onChange:w})}),Array.isArray(null===h||void 0===h?void 0:h.nominee)&&h.nominee.map(((e,t)=>Object(v.jsx)("div",{className:"text-danger mt-1",children:e},t))),j.length>0&&Object(v.jsx)("div",{className:oe.a.SuggestionBox,children:j.map((e=>Object(v.jsxs)("div",{className:oe.a.SuggestionItem,onClick:()=>(e=>{m(e.id),o(`${e.first_name} ${e.last_name}`),u([])})(e),children:[e.first_name," ",e.last_name]},e.id)))})]}),Object(v.jsx)($.a,{placement:"top",overlay:Object(v.jsx)(L.a,{children:"Pick a tag that reflects the nomination"}),children:Object(v.jsxs)(re.a.Control,{as:"select",name:"tag",value:r,"aria-label":"Pick a tag that reflects the nomination",onChange:w,children:[Object(v.jsx)("option",{value:"",children:"Select a tag"}),p.map((e=>Object(v.jsx)("option",{value:e.name,children:e.name},e.id)))]})}),Array.isArray(null===h||void 0===h?void 0:h.tag)&&h.tag.map(((e,t)=>Object(v.jsx)("div",{className:"text-danger mt-1",children:e},t)))]})})})};var xe=function(){const{id:e}=Object(l.h)(),t=Object(l.f)(),[a,s]=Object(n.useState)(!1),r=Object(l.g)(),[c,d]=Object(n.useState)(null);let m=null;const j=new URLSearchParams(r.search),u="true"===j.get("created"),p="true"===j.get("updated"),b=u||p,h=u?"Your nomination has been published!":p?"Your nomination has been updated!":"";return Object(n.useEffect)((()=>{if(b){const e=setTimeout((()=>{const e=r.pathname;t.replace(e)}),4e3);return()=>clearTimeout(e)}}),[b,t,r.pathname]),Object(n.useEffect)((()=>{g.get(`/nominations/${e}/`).then((e=>{d(e.data),console.log("Nomination object:",e.data)})).catch((e=>{}))}),[e]),c?(m=c.is_user?Object(v.jsx)(U,{handleEdit:()=>t.push(`/nominations/${c.id}/edit`),handleDelete:()=>{s(!0)}}):null,Object(v.jsxs)(i.a,{children:[b&&Object(v.jsx)(k.a,{variant:"success",dismissible:!0,children:h}),Object(v.jsx)(q,{title:c.title,content:c.content,user:c.user,username:c.username,first_name:c.first_name,last_name:c.last_name,display_name:c.display_name,profile_image:c.profile_image,profile_id:c.profile_id,nominee_profile_id:c.nominee_profile_id,created_at:c.created_at,renderDropdown:m,metaTop:c.nominee_display_name&&c.tag&&Object(v.jsxs)("p",{className:M.a.NominationMeta,children:[c.nominee_profile_id?Object(v.jsx)(o.b,{to:`/profiles/${c.nominee_profile_id}`,className:M.a.InteractiveNameLink,children:Object(v.jsx)("strong",{children:c.nominee_display_name})}):Object(v.jsx)("strong",{children:c.nominee_display_name})," ","was nominated by ",Object(v.jsx)("strong",{children:c.display_name})," for"," ",Object(v.jsx)("span",{style:{backgroundColor:c.tag_color,color:"#fff",padding:"2px 8px",borderRadius:"12px",fontSize:"0.8rem"},children:c.tag})]})}),Object(v.jsx)(H,{show:a,onHide:()=>s(!1),onConfirm:async()=>{try{await g.delete(`/nominations/${c.id}/`),t.push("/?deleted=true")}catch(e){}finally{s(!1)}}})]})):Object(v.jsx)(i.a,{className:"d-flex justify-content-center py-5",children:Object(v.jsx)(te,{message:"Loading nomination..."})})};var _e=function(){const{id:e}=Object(l.h)(),t=Object(l.f)(),[a,s]=Object(n.useState)({title:"",content:"",nominee_display_name:"",tag:""}),{title:r,content:c,nominee_display_name:o,tag:d}=a,[m,j]=Object(n.useState)([]),[u,p]=Object(n.useState)(!1),[b,h]=Object(n.useState)({});Object(n.useEffect)((()=>{g.get(`/nominations/${e}/`).then((e=>{const{title:t,content:a,nominee_display_name:n,tag:r}=e.data;s({title:t,content:a,nominee_display_name:n,tag:r}),p(!0)})).catch((e=>{t.push("/")}))}),[e,t]),Object(n.useEffect)((()=>{g.get("/tags/").then((e=>j(e.data.results))).catch((e=>{}))}),[]);const O=e=>{const{name:t,value:n}=e.target;t&&h((e=>({...e,[t]:""}))),s({...a,[t]:n})};return u?Object(v.jsx)(i.a,{children:Object(v.jsx)(le,{title:r,content:c,handleChange:O,handleSubmit:async a=>{a.preventDefault();const n=new FormData;n.append("title",r),n.append("content",c),n.append("tag",d);try{await g.patch(`/nominations/${e}/`,n,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"multipart/form-data"}}),t.push(`/nominations/${e}?updated=true`)}catch(l){var s,o,i;if(console.error("Submission error:",null===(s=l.response)||void 0===s?void 0:s.data),401!==(null===(o=l.response)||void 0===o?void 0:o.status))h((null===(i=l.response)||void 0===i?void 0:i.data)||{})}},submitText:"Update",onCancel:()=>t.push(`/nominations/${e}`),errors:b,children:Object(v.jsxs)(re.a.Group,{className:oe.a.FormMediaWrapper,children:[Object(v.jsx)(re.a.Label,{className:"mb-2",children:Object(v.jsx)("strong",{children:"Nominee:"})}),Object(v.jsx)("div",{className:"mb-3",children:o}),Object(v.jsx)($.a,{placement:"top",overlay:Object(v.jsx)(L.a,{children:"Select a new tag if needed"}),children:Object(v.jsxs)(re.a.Control,{as:"select",name:"tag",value:d,"aria-label":"Select a new tag if needed",onChange:O,children:[Object(v.jsx)("option",{value:"",children:"Select a tag"}),m.map((e=>Object(v.jsx)("option",{value:e.name,children:e.name},e.id)))]})}),Array.isArray(null===b||void 0===b?void 0:b.tag)&&b.tag.map(((e,t)=>Object(v.jsx)("div",{className:"text-danger mt-1",children:e},t)))]})})}):Object(v.jsx)(i.a,{className:"d-flex justify-content-center py-5",children:Object(v.jsx)(te,{message:"Loading nomination..."})})},fe=a(19),ve=a.n(fe);var Ne=function(){const{id:e}=Object(l.h)(),t=Object(l.f)(),a=Object(l.g)(),[s,r]=Object(n.useState)(new URLSearchParams(a.search).get("updated")),{currentUser:c}=C(),[o,d]=Object(n.useState)(null),[j,u]=Object(n.useState)([]),[p,b]=Object(n.useState)([]),[h,O]=Object(n.useState)(!1),[x,_]=Object(n.useState)(!1),[f,N]=Object(n.useState)(!1);if(Object(n.useEffect)((()=>{if(s){const e=setTimeout((()=>r(!1)),4e3);return()=>clearTimeout(e)}}),[s]),Object(n.useEffect)((()=>{if("undefined"===e)return;(async()=>{try{const{data:t}=await g.get(`/user-profiles/${e}/`);d(t)}catch(t){}finally{O(!0)}})()}),[e]),Object(n.useEffect)((()=>{"undefined"!==e&&g.get(`/posts/?user__profile=${e}`).then((e=>u(e.data.results))).catch((()=>{})).finally((()=>_(!0)))}),[e]),Object(n.useEffect)((()=>{"undefined"!==e&&g.get(`/nominations/?nominator__profile=${e}`).then((e=>b(e.data.results))).catch((()=>{})).finally((()=>N(!0)))}),[e]),"undefined"===e)return Object(v.jsx)(te,{message:"Preparing your profile..."});if(!h||!x||!f)return Object(v.jsx)(te,{message:"Loading profile..."});const y=!o.first_name||!o.last_name||!o.department,S=!o.presentation||!o.profile_image;return Object(v.jsxs)(v.Fragment,{children:[s&&Object(v.jsx)("div",{className:"alert alert-success text-center mt-3",children:"Your profile has been updated!"}),Object(v.jsxs)(i.a,{children:[o&&Object(v.jsxs)("div",{className:ve.a.ProfileWrapper,children:[Object(v.jsx)("div",{className:ve.a.Banner}),Object(v.jsx)("div",{className:ve.a.AvatarWrapper,children:Object(v.jsx)(Z,{src:o.profile_image,first_name:o.first_name,last_name:o.last_name,username:o.user,size:"lg"})}),Object(v.jsxs)("div",{className:ve.a.ProfileDetails,children:[Object(v.jsxs)("div",{className:ve.a.NameRow,children:[Object(v.jsx)("h3",{children:o.first_name||o.last_name?`${o.first_name||""} ${o.last_name||""}`.trim():o.user}),c?o.is_user_profile?Object(v.jsx)("span",{className:ve.a.EditIcon,onClick:()=>t.push(`/profiles/${o.id}/edit`),children:Object(v.jsx)("i",{className:"fa-solid fa-pen"})}):Object(v.jsx)(T.a,{className:m.a.YellowButton,onClick:()=>t.push(`/nominations/create?nominee=${o.user}&name=${o.first_name} ${o.last_name}`),children:"Nominate"}):null]}),y&&Object(v.jsxs)("p",{className:ve.a.IncompleteNote,children:[" ",o.is_user_profile?Object(v.jsx)(v.Fragment,{children:"Some profile details are missing. Contact HR to update your name or department."}):Object(v.jsx)(v.Fragment,{children:"This profile is still under review and may be incomplete."})]}),!y&&o.is_user_profile&&S&&Object(v.jsx)("p",{className:ve.a.IncompleteNote,children:"You can complete your profile by adding a picture or writing a short bio using the edit icon."}),Object(v.jsx)("p",{className:ve.a.Department,children:o.department}),Object(v.jsx)("p",{className:ve.a.Bio,children:o.presentation||"No bio yet."})]})]}),Object(v.jsxs)("div",{className:ve.a.TwoColumnFeed,children:[Object(v.jsxs)("div",{className:ve.a.FeedColumn,children:[Object(v.jsx)("div",{className:ve.a.SectionTitlePurple,children:"Recognitions"}),j.filter((e=>e.user===o.user)).length>0?j.filter((e=>e.user===o.user)).map((e=>Object(v.jsx)(X,{...e,setRecognitions:u,onPostDelete:e=>u((t=>t.filter((t=>t.id!==e))))},`post-${e.id}`))):Object(v.jsx)("p",{className:"text-center text-muted",children:"No recognitions yet."})]}),Object(v.jsxs)("div",{className:ve.a.FeedColumn,children:[Object(v.jsx)("div",{className:ve.a.SectionTitleYellow,children:"Nominations"}),p.filter((e=>e.nominator===o.user||e.nominee_username===o.user)).length>0?p.filter((e=>e.nominator===o.user||e.nominee_username===o.user)).map((e=>Object(v.jsx)(Q,{...e,setPosts:b,onPostDelete:e=>b((t=>t.filter((t=>t.id!==e))))},`nom-${e.id}`))):Object(v.jsx)("p",{className:"text-center text-muted",children:"No nominations yet."})]})]})]})]})};var ye=function(){const{id:e}=Object(l.h)(),t=Object(l.f)(),a=S(),[s,r]=Object(n.useState)(null),[c,o]=Object(n.useState)(""),[d,m]=Object(n.useState)(""),[j,u]=Object(n.useState)(""),[p,b]=Object(n.useState)(null),[h,O]=Object(n.useState)(!1),[_,f]=Object(n.useState)({});return Object(n.useEffect)((()=>{(async()=>{try{const{data:t}=await g.get(`/user-profiles/${e}/`);r(t),o(t.first_name),m(t.last_name),u(t.presentation||""),O(!0)}catch(t){}})()}),[e]),h?Object(v.jsxs)("div",{className:"container mt-4",children:[Object(v.jsx)("h2",{children:"Edit your profile"}),s?Object(v.jsxs)(re.a,{onSubmit:async e=>{e.preventDefault();const n=new FormData;n.append("presentation",j),p&&"string"!==typeof p&&n.append("profile_image",p);try{const{data:e}=await g.patch(`/user-profiles/${s.id}/`,n,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"multipart/form-data"}});r(e),a(await x.get("/dj-rest-auth/user/").then((e=>e.data))),t.push(`/profiles/${s.id}?updated=true`)}catch(o){var c;f((null===(c=o.response)||void 0===c?void 0:c.data)||{})}},children:[Object(v.jsx)(re.a.Group,{controlId:"firstName",className:oe.a.FormGroupSpacing,children:Object(v.jsx)($.a,{placement:"top",overlay:Object(v.jsx)(L.a,{children:"To update your first name, please contact your HR representative"}),children:Object(v.jsx)("div",{className:oe.a.ReadOnlyWrapper,children:Object(v.jsx)(re.a.Control,{className:oe.a.ReadOnlyInput,type:"text",value:c,readOnly:!0,tabIndex:-1,placeholder:"First Name","aria-label":"First Name (read-only)"})})})}),Object(v.jsx)(re.a.Group,{controlId:"lastName",className:oe.a.FormGroupSpacing,children:Object(v.jsx)($.a,{placement:"top",overlay:Object(v.jsx)(L.a,{children:"To update your last name, please contact your HR representative"}),children:Object(v.jsx)("div",{className:oe.a.ReadOnlyWrapper,children:Object(v.jsx)(re.a.Control,{className:oe.a.ReadOnlyInput,type:"text",value:d,readOnly:!0,tabIndex:-1,placeholder:"Last Name","aria-label":"Last Name (read-only)"})})})}),Object(v.jsxs)(re.a.Group,{controlId:"presentation",className:oe.a.FormGroupSpacing,children:[Object(v.jsx)($.a,{placement:"top",overlay:Object(v.jsx)(L.a,{children:"Write a short bio about yourself"}),children:Object(v.jsx)(re.a.Control,{as:"textarea",rows:3,value:j,onChange:e=>u(e.target.value),placeholder:"Write something about yourself","aria-label":"Short bio about yourself"})}),Array.isArray(null===_||void 0===_?void 0:_.presentation)&&_.presentation.map(((e,t)=>Object(v.jsx)("div",{className:"text-danger mt-1",children:e},t)))]}),Object(v.jsxs)(re.a.Group,{className:oe.a.FormGroupSpacing,children:[s.profile_image&&Object(v.jsx)("img",{src:s.profile_image,alt:"Current profile",className:oe.a.FormImagePreview}),Object(v.jsx)(re.a.Control,{type:"file",name:"profile_image",onChange:e=>b(e.target.files[0]),"aria-label":"Upload new profile image"}),Array.isArray(null===_||void 0===_?void 0:_.profile_image)&&_.profile_image.map(((e,t)=>Object(v.jsx)("div",{className:"text-danger mt-1",children:e},t)))]}),Object(v.jsx)(ie,{submitText:"Update",onCancel:()=>t.goBack()})]}):Object(v.jsx)("p",{children:"Loading profile..."})]}):Object(v.jsx)(i.a,{className:"d-flex justify-content-center py-5",children:Object(v.jsx)(te,{message:"Loading profile..."})})},Ce=a(10),Se=a.n(Ce),we=a.p+"static/media/auth_pic.305084ff.jpeg";var Fe=function(){const e=Object(l.g)(),[t,a]=Object(n.useState)(new URLSearchParams(e.search).get("registered")),[s,r]=Object(n.useState)(new URLSearchParams(e.search).get("loggedOut"));Object(n.useEffect)((()=>{if(t||s){const e=setTimeout((()=>{a(!1),r(!1)}),4e3);return()=>clearTimeout(e)}}),[t,s]);const c=S(),[d,j]=Object(n.useState)({username:"",password:""}),[u,p]=Object(n.useState)({}),{username:b,password:h}=d,x=Object(l.f)();function f(e){j({...d,[e.target.name]:e.target.value})}return Object(v.jsxs)(v.Fragment,{children:[t&&Object(v.jsx)(k.a,{variant:"success",className:"mt-3 text-center",children:"Registration successful! Please log in."}),s&&Object(v.jsx)(k.a,{variant:"info",className:"mt-3 text-center",children:"You have been logged out."}),Object(v.jsx)(i.a,{className:"d-flex justify-content-center",children:Object(v.jsx)("div",{className:Se.a.gradient,children:Object(v.jsx)("div",{className:Se.a.gradientOverlay,children:Object(v.jsxs)("div",{className:Se.a.splitBox,children:[Object(v.jsxs)("div",{className:Se.a.formBox,children:[Object(v.jsx)("h2",{className:Se.a.AuthTitle,children:"LOGIN"}),Object.keys(u).length>0&&Object(v.jsx)("div",{className:Se.a.ErrorBox,children:Object(v.jsx)("ul",{className:"mb-0 ps-3",children:Object.values(u).flat().map(((e,t)=>Object(v.jsx)("li",{children:e},t)))})}),Object(v.jsxs)(re.a,{onSubmit:async function(e){e.preventDefault();try{const{data:e}=await O.a.post("/dj-rest-auth/login/",d);localStorage.setItem("access_token",e.access_token),localStorage.setItem("refresh_token",e.refresh_token),(e=>{const t=Object(_.a)(null===e||void 0===e?void 0:e.refresh_token).exp;localStorage.setItem("refreshTokenTimestamp",t)})(e);const{data:t}=await g.get("/dj-rest-auth/user/");c(t),x.push("/")}catch(a){var t;p((null===(t=a.response)||void 0===t?void 0:t.data)||{})}},className:Se.a.FormWrapper,children:[Object(v.jsxs)(re.a.Group,{controlId:"username",className:Se.a.FormGroupSpacing,children:[Object(v.jsx)(re.a.Label,{className:"d-none",children:"Username"}),Object(v.jsx)(re.a.Control,{type:"text",placeholder:"Username",name:"username",value:b,onChange:f})]}),Object(v.jsxs)(re.a.Group,{controlId:"password",className:Se.a.FormGroupSpacing,children:[Object(v.jsx)(re.a.Label,{className:"d-none",children:"Password"}),Object(v.jsx)(re.a.Control,{type:"password",placeholder:"Password",name:"password",value:h,onChange:f})]}),Object(v.jsx)(T.a,{type:"submit",className:`${m.a.YellowButton} ${Se.a.CenteredButton}`,children:"Submit"})]}),Object(v.jsxs)("div",{className:Se.a.AuthLink,children:["OR",Object(v.jsx)(o.b,{to:"/register",className:Se.a.AuthLinkHighlight,children:"Sign up!"})]})]}),Object(v.jsx)("div",{className:Se.a.imageBox,children:Object(v.jsx)("img",{src:we,alt:"Sign in illustration",className:Se.a.AuthImage})})]})})})})]})},ke=a.p+"static/media/register_pic.769add72.jpg";var Pe=function(){const[e,t]=Object(n.useState)({username:"",password1:"",password2:""}),[a,s]=Object(n.useState)({}),{username:r,password1:c,password2:d}=e,j=Object(l.f)();function u(a){t({...e,[a.target.name]:a.target.value})}return Object(v.jsx)(i.a,{className:"d-flex justify-content-center",children:Object(v.jsx)("div",{className:Se.a.gradient,children:Object(v.jsx)("div",{className:Se.a.gradientOverlay,children:Object(v.jsxs)("div",{className:Se.a.splitBox,children:[Object(v.jsxs)("div",{className:Se.a.formBox,children:[Object(v.jsx)("h2",{className:Se.a.AuthTitle,children:"Register"}),Object(v.jsxs)(re.a,{onSubmit:async function(t){t.preventDefault();try{await g.post("/dj-rest-auth/registration/",e),j.push("/login?registered=true")}catch(n){var a;s((null===(a=n.response)||void 0===a?void 0:a.data)||{})}},className:Se.a.FormWrapper,children:[Object.keys(a).length>0&&Object(v.jsx)("div",{className:Se.a.ErrorBox,children:Object(v.jsx)("ul",{className:"mb-0 ps-3",children:Object.values(a).flat().map(((e,t)=>Object(v.jsx)("li",{children:e},t)))})}),Object(v.jsxs)(re.a.Group,{controlId:"username",className:Se.a.FormGroupSpacing,children:[Object(v.jsx)(re.a.Label,{className:"d-none",children:"Username"}),Object(v.jsx)(re.a.Control,{type:"text",placeholder:"Username",name:"username",value:r,onChange:u})]}),Object(v.jsxs)(re.a.Group,{controlId:"password1",className:Se.a.FormGroupSpacing,children:[Object(v.jsx)(re.a.Label,{className:"d-none",children:"Password"}),Object(v.jsx)(re.a.Control,{type:"password",placeholder:"Password",name:"password1",value:c,onChange:u})]}),Object(v.jsxs)(re.a.Group,{controlId:"password2",className:Se.a.FormGroupSpacing,children:[Object(v.jsx)(re.a.Label,{className:"d-none",children:"Confirm Password"}),Object(v.jsx)(re.a.Control,{type:"password",placeholder:"Confirm Password",name:"password2",value:d,onChange:u})]}),Object(v.jsx)(T.a,{type:"submit",className:`${m.a.YellowButton} ${Se.a.CenteredButton}`,children:"Submit"})]}),Object(v.jsxs)("div",{className:Se.a.AuthLink,children:["OR",Object(v.jsx)(o.b,{to:"/login",className:Se.a.AuthLinkHighlight,children:"Log In!"})]})]}),Object(v.jsx)("div",{className:Se.a.imageBox,children:Object(v.jsx)("img",{src:ke,alt:"Register illustration",className:Se.a.AuthImage})})]})})})})};var Ie=function(){const{currentUserLoaded:e}=C();return e?Object(v.jsxs)("div",{className:m.a.App,children:[Object(v.jsx)(F,{}),Object(v.jsx)(i.a,{className:m.a.Main,children:Object(v.jsxs)(l.c,{children:[Object(v.jsx)(l.a,{exact:!0,path:"/",component:se}),Object(v.jsx)(l.a,{exact:!0,path:"/recognitions/create",component:de}),Object(v.jsx)(l.a,{exact:!0,path:"/recognitions/:id",component:he}),Object(v.jsx)(l.a,{exact:!0,path:"/recognitions/:id/edit",component:Oe}),Object(v.jsx)(l.a,{exact:!0,path:"/nominations/create",component:ge}),Object(v.jsx)(l.a,{exact:!0,path:"/nominations/:id",component:xe}),Object(v.jsx)(l.a,{exact:!0,path:"/nominations/:id/edit",component:_e}),Object(v.jsx)(l.a,{exact:!0,path:"/profiles/:id",component:Ne}),Object(v.jsx)(l.a,{exact:!0,path:"/profiles/:id/edit",component:ye}),Object(v.jsx)(l.a,{exact:!0,path:"/login",component:Fe}),Object(v.jsx)(l.a,{exact:!0,path:"/register",component:Pe}),Object(v.jsx)(l.a,{render:()=>Object(v.jsx)("p",{children:"Page not found"})})]})})]}):null};var Te=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,137)).then((t=>{let{getCLS:a,getFID:n,getFCP:s,getLCP:r,getTTFB:c}=t;a(e),n(e),s(e),r(e),c(e)}))};c.a.render(Object(v.jsx)(s.a.StrictMode,{children:Object(v.jsx)(o.a,{children:Object(v.jsx)(w,{children:Object(v.jsx)(Ie,{})})})}),document.getElementById("root")),Te()},18:function(e,t,a){e.exports={FeedToggleButtons:"HomeFeedPage_FeedToggleButtons__2iujI",FeedButton:"HomeFeedPage_FeedButton__TzTd8",FeedToggleActive:"HomeFeedPage_FeedToggleActive__1r3Ap",FeedToggleInactive:"HomeFeedPage_FeedToggleInactive__1n6t-",FeedContent:"HomeFeedPage_FeedContent__2yePL",PostCard:"HomeFeedPage_PostCard__KOPm-",SearchFilterBlock:"HomeFeedPage_SearchFilterBlock__15nv6",FilterInput:"HomeFeedPage_FilterInput__2SRFV",FilterSelect:"HomeFeedPage_FilterSelect__Dljfr",PersonItem:"HomeFeedPage_PersonItem__24LIT",PersonContent:"HomeFeedPage_PersonContent__3kTEO",row:"HomeFeedPage_row__fzNUj",SidebarWrapper:"HomeFeedPage_SidebarWrapper__3D4BG",PeopleList:"HomeFeedPage_PeopleList__1Ewhz"}},19:function(e,t,a){e.exports={ProfileWrapper:"Profile_ProfileWrapper__2hX_C",Banner:"Profile_Banner__1TXeK",TwoColumnFeed:"Profile_TwoColumnFeed__1Kev4",FeedColumn:"Profile_FeedColumn__1daGe",CompanyName:"Profile_CompanyName__3xp_1",AvatarWrapper:"Profile_AvatarWrapper__1k8ru",NameRow:"Profile_NameRow__1yZFR",EditIcon:"Profile_EditIcon__Du4pB",ProfileDetails:"Profile_ProfileDetails__Z1h8m",IncompleteNote:"Profile_IncompleteNote__1jg-n",Department:"Profile_Department__281vj",Bio:"Profile_Bio__3Zlhj",SectionTitlePurple:"Profile_SectionTitlePurple__HDOQ6",SectionTitleYellow:"Profile_SectionTitleYellow__1YogP"}},28:function(e,t,a){e.exports={App:"App_App__1lbrG",Main:"App_Main__1eJsZ",YellowButton:"App_YellowButton__1Qzej",BlueButton:"App_BlueButton__2jV1c"}},33:function(e,t,a){e.exports={CommentSection:"Comment_CommentSection__3CGtR",SingleComment:"Comment_SingleComment__37rPz",CommentAuthor:"Comment_CommentAuthor__3lWSc",CommentText:"Comment_CommentText__ttCTQ",CommentDate:"Comment_CommentDate__1Z1_P"}},51:function(e,t,a){e.exports={Avatar:"Avatar_Avatar__3uD0u",AvatarFallback:"Avatar_AvatarFallback__1vL5U",sm:"Avatar_sm__203uy",md:"Avatar_md__xFaTA",lg:"Avatar_lg__2Ddpb"}},67:function(e,t,a){e.exports={DropdownToggle:"MoreDropdown_DropdownToggle__h1s3T",DropdownItem:"MoreDropdown_DropdownItem__m5TH-"}},68:function(e,t,a){e.exports={LoaderWrapper:"LoadingIndicator_LoaderWrapper__3GUK2",Spinner:"LoadingIndicator_Spinner__1L6aF",spin:"LoadingIndicator_spin__3hhrF",Message:"LoadingIndicator_Message__2bNaE"}},74:function(e,t,a){},8:function(e,t,a){e.exports={CardWrapper:"PostCard_CardWrapper__1aPfU",PostHeaderWrapper:"PostCard_PostHeaderWrapper__368M3",HeaderLeft:"PostCard_HeaderLeft__1-KZy",AvatarWithName:"PostCard_AvatarWithName__1mwHj",PostTitle:"PostCard_PostTitle__amYVY",PostContent:"PostCard_PostContent__1mF67",PostImage:"PostCard_PostImage__2S_6F",ViewFullPostWrapper:"PostCard_ViewFullPostWrapper__6ZfRw",InteractiveTextLink:"PostCard_InteractiveTextLink__3ond2",InteractiveNameLink:"PostCard_InteractiveNameLink__2hlHX",PostFooter:"PostCard_PostFooter__3RbvB",PostChildren:"PostCard_PostChildren__7MF44",ActionItem:"PostCard_ActionItem__1_YXt",Clickable:"PostCard_Clickable__3KGDz",DisabledIcon:"PostCard_DisabledIcon__35ZDD",LoginToComment:"PostCard_LoginToComment__3t1Dq",TagSection:"PostCard_TagSection__32VHi",Tag:"PostCard_Tag__2UN8U"}},84:function(e,t,a){e.exports={Navbar:"NavBar_Navbar__1-xmk","nav-link":"NavBar_nav-link__3OyqH"}}},[[123,1,2]]]);
//# sourceMappingURL=main.698274d4.chunk.js.map