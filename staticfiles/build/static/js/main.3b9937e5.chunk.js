(this.webpackJsonpmoments=this.webpackJsonpmoments||[]).push([[0],{10:function(e,t,a){e.exports={FormWrapper:"AuthForm_FormWrapper__2_2G7",FormGroupSpacing:"AuthForm_FormGroupSpacing__2YsuF",CenteredButton:"AuthForm_CenteredButton__mPhxp",AuthLink:"AuthForm_AuthLink__2nuPw",AuthLinkHighlight:"AuthForm_AuthLinkHighlight__2veRz",gradient:"AuthForm_gradient__4bNq5",gradientOverlay:"AuthForm_gradientOverlay__1aP-S",splitBox:"AuthForm_splitBox__3Qoc9",formBox:"AuthForm_formBox__2Tlgu",imageBox:"AuthForm_imageBox__1jRNM",AuthImage:"AuthForm_AuthImage__1OpaW",AuthTitle:"AuthForm_AuthTitle__tI1Xj",ErrorBox:"AuthForm_ErrorBox__2o8wb"}},11:function(e,t,a){e.exports={FormWrapper:"PostForm_FormWrapper__36o49",FormGroupSpacing:"PostForm_FormGroupSpacing__2YMOe",CurrentImage:"PostForm_CurrentImage__3gjY8",RemoveImageCheckbox:"PostForm_RemoveImageCheckbox__2Gu0U",FormButtonRow:"PostForm_FormButtonRow__ISUGS",FormMediaWrapper:"PostForm_FormMediaWrapper__3Ey43",FormImagePreview:"PostForm_FormImagePreview__2Oka5",SuggestionBox:"PostForm_SuggestionBox__34k9g",SuggestionItem:"PostForm_SuggestionItem__2asAs"}},122:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(26),o=a.n(c),r=(a(92),a(9)),i=a(85),l=a(13),d=a(29),m=a.n(d),j=a(132),u=a(133),p=a(82),h=a.n(p),b=a(27),O=a.n(b);O.a.defaults.baseURL="/api",O.a.defaults.headers.post["Content-Type"]="multipart/form-data",O.a.defaults.withCredentials=!0;const g=O.a.create(),x=O.a.create();var _=a(83);const f=()=>{localStorage.removeItem("refreshTokenTimestamp")};var v=a(1);const C=Object(n.createContext)(),N=Object(n.createContext)(),y=()=>Object(n.useContext)(C),S=()=>Object(n.useContext)(N);function w(e){let{children:t}=e;const[a,s]=Object(n.useState)(null),[c,o]=Object(n.useState)(!1),r=Object(l.f)(),i=Object(n.useRef)(null),d=Object(n.useRef)(null);return Object(n.useEffect)((()=>{(async()=>{try{const{data:e}=await x.get("dj-rest-auth/user/");s(e)}catch(e){}finally{o(!0)}})();const e=setInterval((()=>{x.get("/dj-rest-auth/user/").then((e=>{let{data:t}=e;s(t)})).catch((()=>{}))}),3e5);return()=>clearInterval(e)}),[]),Object(n.useEffect)((()=>(g.interceptors.request.use((e=>{const t=localStorage.getItem("access_token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),(e=>Promise.reject(e))),i.current=g.interceptors.request.use((async e=>{const t=e._isRefreshing;if(localStorage.getItem("refreshTokenTimestamp")&&!t)try{const{data:e}=await O.a.post("/dj-rest-auth/token/refresh/");if(localStorage.setItem("access_token",e.access),g.defaults.headers.common.Authorization=`Bearer ${e.access}`,!a){const{data:e}=await x.get("/dj-rest-auth/user/");s(e)}}catch(n){return s((e=>(e&&r.push("/signin"),null))),f(),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),e}return e}),(e=>Promise.reject(e))),d.current=x.interceptors.response.use((e=>e),(async e=>{var t;if(401===(null===(t=e.response)||void 0===t?void 0:t.status))try{const{data:t}=await O.a.post("/dj-rest-auth/token/refresh/");localStorage.setItem("access_token",t.access),g.defaults.headers.common.Authorization=`Bearer ${t.access}`,e.config.headers={...e.config.headers,Authorization:`Bearer ${t.access}`};const{data:a}=await x.get("/dj-rest-auth/user/");return s(a),g(e.config)}catch(e){return console.warn("TOKEN REFRESH FAILED \u2014 Forcing logout."),s((e=>(e&&r.push("/signin"),null))),f(),localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),Promise.reject(e)}return Promise.reject(e)})),()=>{null!==i.current&&g.interceptors.request.eject(i.current),null!==d.current&&x.interceptors.response.eject(d.current)})),[r,a]),Object(v.jsx)(C.Provider,{value:{currentUser:a,currentUserLoaded:c},children:Object(v.jsx)(N.Provider,{value:s,children:t})})}var F=function(){const{currentUser:e,currentUserLoaded:t}=y(),a=S(),n=Object(l.f)();return Object(v.jsx)(j.a,{className:h.a.Navbar,expand:"md",fixed:"top",children:Object(v.jsxs)(i.a,{children:[Object(v.jsxs)(j.a.Brand,{as:r.c,to:"/",children:["CelebrateIt"," ",null!==e&&void 0!==e&&e.first_name||null!==e&&void 0!==e&&e.username?`| ${e.first_name||e.username}`:""]}),Object(v.jsx)(j.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(v.jsx)(j.a.Collapse,{id:"basic-navbar-nav",children:Object(v.jsxs)(u.a,{className:"ml-auto text-left",children:[Object(v.jsx)(u.a.Link,{as:r.c,exact:!0,to:"/",children:"Home"}),e&&e?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(r.c,{to:"/recognitions/create",className:"nav-link",children:"Recognize"}),Object(v.jsx)(r.c,{to:"/nominations/create",className:"nav-link",children:"Nominate"}),Object(v.jsx)(r.c,{to:`/profiles/${null===e||void 0===e?void 0:e.profile_id}`,className:"nav-link",children:"Profile"}),Object(v.jsx)(u.a.Link,{as:r.c,to:"/",onClick:async()=>{try{await g.post("/dj-rest-auth/logout/"),a(null),f(),n.push("/login?loggedOut=true")}catch(e){}},children:"Logout"})]}):t?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(u.a.Link,{as:r.c,to:"/login",children:"Log In"}),Object(v.jsx)(u.a.Link,{as:r.c,to:"/register",children:"Register"})]}):null]})})]})})},P=a(126),k=a(127),I=a(87),T=a(86),$=a(135),L=a(131),A=a(125),B=a(130),D=a(66),E=a.n(D);const R=s.a.forwardRef(((e,t)=>{let{onClick:a}=e;return Object(v.jsx)("i",{className:`fas fa-ellipsis-v ${E.a.DropdownToggle}`,ref:t,onClick:e=>{e.preventDefault(),a(e)},role:"button","aria-label":"options"})}));var U=function(e){let{handleEdit:t,handleDelete:a}=e;return Object(v.jsxs)(B.a,{align:"end",children:[Object(v.jsx)(B.a.Toggle,{as:R}),Object(v.jsxs)(B.a.Menu,{children:[t&&Object(v.jsxs)(B.a.Item,{className:E.a.DropdownItem,onClick:t,children:[Object(v.jsx)("i",{className:"fas fa-edit"}),"Edit"]}),a&&Object(v.jsxs)(B.a.Item,{className:E.a.DropdownItem,onClick:a,children:[Object(v.jsx)("i",{className:"fas fa-trash-alt"}),"Delete"]})]})]})},W=a(128);var G=function(e){let{show:t,onHide:a,onConfirm:n,message:s="Are you sure you want to delete this?"}=e;return Object(v.jsxs)(W.a,{show:t,onHide:a,centered:!0,children:[Object(v.jsx)(W.a.Header,{closeButton:!0,children:Object(v.jsx)(W.a.Title,{children:"Confirm Deletion"})}),Object(v.jsx)(W.a.Body,{children:s}),Object(v.jsxs)(W.a.Footer,{children:[Object(v.jsx)(T.a,{variant:"secondary",onClick:a,children:"Cancel"}),Object(v.jsx)(T.a,{variant:"danger",onClick:n,children:"Delete"})]})]})},H=a(8),M=a.n(H),Y=a(134),z=a(15),V=a.n(z);var Z=function(e){const{profile_image:t,display_name:a,created_at:n,renderDropdown:s}=e;return Object(v.jsxs)("div",{className:V.a.PostHeaderWrapper,children:[Object(v.jsxs)("div",{className:V.a.HeaderLeft,children:[Object(v.jsx)("img",{src:t,alt:a,className:V.a.Avatar}),Object(v.jsx)("strong",{children:a})]}),Object(v.jsxs)("div",{className:"d-flex align-items-center",children:[Object(v.jsx)("small",{className:"text-muted me-2",children:n}),s]})]})};var q=function(e){const{title:t,content:a,display_name:n,profile_image:s,created_at:c,renderDropdown:o,postActions:i,children:l,extraContent:d,linkTo:m,metaTop:j}=e,u=Object(v.jsxs)(Y.a.Body,{children:[Object(v.jsx)(Z,{display_name:n,profile_image:s,created_at:c,renderDropdown:o}),j&&Object(v.jsx)("div",{className:M.a.MetaTopWrapper,children:j}),Object(v.jsx)("h5",{className:M.a.PostTitle,children:t}),Object(v.jsx)("p",{className:M.a.PostContent,children:a}),d&&Object(v.jsx)("div",{className:M.a.ViewFullWrapper,children:d}),l&&Object(v.jsx)("div",{className:M.a.PostChildren,children:l})]});return Object(v.jsxs)(Y.a,{className:`mb-3 ${M.a.CardWrapper}`,children:[m?Object(v.jsx)(r.b,{to:m,style:{textDecoration:"none",color:"inherit"},children:u}):u,i]})};var K=function(e){const{id:t,title:a,content:s,image:c,display_name:o,profile_image:i,created_at:d,likes_count:m,comments_count:j,like_id:u,setRecognitions:p,onPostDelete:h,detailUrl:b=`/recognitions/${t}`,editUrl:O=`/recognitions/${t}/edit`,deleteUrl:_=`/posts/${t}/`}=e,{currentUser:f,currentUserLoaded:C}=y(),N=Object(l.f)(),[S,w]=Object(n.useState)(!1);if(!C)return null;const F=s.length>150?`${s.slice(0,s.slice(0,150).lastIndexOf(" "))}...`:s,P=Object(v.jsxs)("div",{className:M.a.PostFooter,children:[Object(v.jsxs)("div",{className:M.a.ActionItem,children:[(null===f||void 0===f?void 0:f.username)===e.user?Object(v.jsx)(L.a,{placement:"top",overlay:Object(v.jsx)(A.a,{id:`tooltip-self-like-${t}`,children:"Can't like your own recognition!"}),children:Object(v.jsx)("span",{className:M.a.DisabledIcon,"aria-label":"You can't like your own recognition",children:Object(v.jsx)("i",{className:"far fa-thumbs-up"})})}):u?Object(v.jsx)("span",{onClick:async()=>{try{await x.delete(`/likes/${u}/`),p((e=>e.map((e=>e.id===t?{...e,likes_count:e.likes_count-1,like_id:null}:e))))}catch(e){}},className:`${M.a.ActionItem} ${M.a.Clickable}`,"aria-label":"Unlike this recognition",children:Object(v.jsx)("i",{className:`fas fa-thumbs-up ${M.a.Heart} ${M.a.Clickable}`})}):f?Object(v.jsx)("span",{onClick:async()=>{try{const{data:e}=await x.post("/likes/",{post:t});p((a=>a.map((a=>a.id===t?{...a,likes_count:a.likes_count+1,like_id:e.id}:a))))}catch(e){}},className:`${M.a.ActionItem} ${M.a.Clickable}`,"aria-label":"Like this recognition",children:Object(v.jsx)("i",{className:`far fa-thumbs-up ${M.a.HeartOutline} ${M.a.Clickable}`})}):Object(v.jsx)(L.a,{placement:"top",overlay:Object(v.jsx)(A.a,{id:`tooltip-login-like-${t}`,children:"Log in to like recognitions!"}),children:Object(v.jsx)("span",{className:M.a.DisabledIcon,"aria-label":"Log in to like this recognition",children:Object(v.jsx)("i",{className:"far fa-thumbs-up"})})}),Object(v.jsx)("span",{children:m})]}),Object(v.jsxs)(r.b,{to:`/recognitions/${t}`,className:`${M.a.ActionItem} ${M.a.Clickable}`,children:[Object(v.jsx)("i",{className:"far fa-comment"}),Object(v.jsx)("span",{children:j})]})]});return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(q,{title:a,content:F,display_name:o,profile_image:i,created_at:d,likes_count:m,comments_count:j,renderDropdown:(null===f||void 0===f?void 0:f.username)===e.user&&Object(v.jsx)(U,{handleEdit:()=>N.push(O),handleDelete:()=>w(!0)}),postActions:P,extraContent:Object(v.jsx)("div",{className:M.a.ViewFullPostWrapper,children:Object(v.jsx)(r.b,{to:b,className:M.a.ViewFullPostLink,children:"View full recognition"})}),children:c&&Object(v.jsx)("div",{className:M.a.ImageWrapper,children:Object(v.jsx)("img",{src:c,alt:a,className:M.a.PostImage})})}),Object(v.jsx)(G,{show:S,onHide:()=>w(!1),onConfirm:async()=>{try{await g.delete(_),h&&h(t),N.push("/?deleted=true")}catch(e){}finally{w(!1)}}})]})};var Q=function(e){const{id:t,title:a,content:s,display_name:c,profile_image:o,created_at:i,nominee_display_name:d,tag:m,tag_color:j,nominator:u,onPostDelete:p,detailUrl:h=`/nominations/${t}`,editUrl:b=`/nominations/${t}/edit`,deleteUrl:O=`/nominations/${t}/`}=e,{currentUser:x,currentUserLoaded:_}=y(),f=Object(l.f)(),[C,N]=Object(n.useState)(!1);if(!_)return null;const S=s.length>150?`${s.slice(0,s.slice(0,150).lastIndexOf(" "))}...`:s;return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(q,{title:a,content:S,display_name:c,profile_image:o,created_at:i,renderDropdown:(null===x||void 0===x?void 0:x.username)===u&&Object(v.jsx)(U,{handleEdit:()=>f.push(b),handleDelete:()=>N(!0)}),metaTop:d&&m&&Object(v.jsxs)("p",{className:M.a.NominationMeta,children:[Object(v.jsx)("strong",{children:d})," was nominated by"," ",Object(v.jsx)("strong",{children:c})," ",Object(v.jsx)("span",{style:{backgroundColor:j,color:"#fff",padding:"2px 8px",borderRadius:"12px",fontSize:"0.8rem"},children:m})]}),extraContent:Object(v.jsx)("div",{className:M.a.ViewFullPostWrapper,children:Object(v.jsx)(r.b,{to:h,className:M.a.ViewFullPostLink,children:"View full nomination"})})}),Object(v.jsx)(G,{show:C,onHide:()=>N(!1),onConfirm:async()=>{try{await g.delete(O),p&&p(t),f.push("/?deleted=true")}catch(e){}finally{N(!1)}}})]})},X=a(67),J=a.n(X);var ee=function(e){let{message:t="Loading..."}=e;return Object(v.jsxs)("div",{className:J.a.LoaderWrapper,children:[Object(v.jsx)("div",{className:J.a.Spinner}),Object(v.jsx)("p",{className:J.a.Message,children:t})]})},te=a(23),ae=a.n(te);var ne=function(){const e=Object(l.g)(),t=Object(l.f)(),{currentUser:a,currentUserLoaded:s}=y();Object(n.useEffect)((()=>{console.log("HomeFeedPage re-evaluated currentUser:",a)}),[a]);const[c,o]=Object(n.useState)(!1),[r,d]=Object(n.useState)(!1),[m,j]=Object(n.useState)(!1),[u,p]=Object(n.useState)(""),[h,b]=Object(n.useState)(""),[x,_]=Object(n.useState)([]),[f,C]=Object(n.useState)([]),[N,S]=Object(n.useState)([]);return Object(n.useEffect)((()=>{const t="true"===new URLSearchParams(e.search).get("deleted");o(t)}),[e.search]),Object(n.useEffect)((()=>{if(c){const e=setTimeout((()=>o(!1)),4e3);return()=>clearTimeout(e)}}),[c]),Object(n.useEffect)((()=>{g.get("/posts/").then((e=>_(e.data.results))).catch((e=>{})).finally((()=>j(!0)))}),[]),Object(n.useEffect)((()=>{g.get("/nominations/").then((e=>C(e.data.results))).catch((e=>{}))}),[]),Object(n.useEffect)((()=>{O.a.get("/user-profiles/").then((e=>S(e.data.results||e.data))).catch((e=>{}))}),[]),s?Object(v.jsxs)(i.a,{children:[c&&Object(v.jsx)(P.a,{variant:"success",onClose:()=>o(!1),dismissible:!0,children:"The post has been deleted successfully."}),Object(v.jsxs)(k.a,{children:[Object(v.jsx)(I.a,{md:8,children:Object(v.jsxs)("div",{className:ae.a.FeedContent,children:[Object(v.jsxs)("div",{className:ae.a.FeedToggleButtons,children:[Object(v.jsx)(T.a,{variant:"none",className:`${ae.a.FeedButton} ${r?ae.a.FeedToggleInactive:ae.a.FeedToggleActive}`,onClick:()=>d(!1),children:"Recognition Stories"}),Object(v.jsx)(T.a,{variant:"none",className:`${ae.a.FeedButton} ${r?ae.a.FeedToggleActive:ae.a.FeedToggleInactive}`,onClick:()=>d(!0),children:"Nominations"})]}),m?Object(v.jsx)(v.Fragment,{children:r?f.length?f.map((e=>Object(v.jsx)(Q,{...e,nominator:e.nominator,setPosts:C,onPostDelete:e=>C((t=>t.filter((t=>t.id!==e))))},`nom-${e.id}`))):Object(v.jsx)("div",{children:"No nominations yet"}):x.length?x.map((e=>Object(v.jsx)(K,{...e,user:e.user,setRecognitions:_,onPostDelete:e=>_((t=>t.filter((t=>t.id!==e))))},`post-${e.id}`))):Object(v.jsx)("div",{children:"No recognitions yet"})}):Object(v.jsx)(ee,{message:"Loading feed..."})]})}),Object(v.jsxs)(I.a,{md:4,children:[Object(v.jsxs)("div",{className:ae.a.SearchFilterBlock,children:[Object(v.jsx)("input",{type:"text",className:ae.a.FilterInput,placeholder:"Search people...",value:u,onChange:e=>p(e.target.value)}),Object(v.jsxs)("select",{className:ae.a.FilterSelect,value:h,onChange:e=>b(e.target.value),children:[Object(v.jsx)("option",{value:"",children:"All Departments"}),[...new Set(N.map((e=>e.department)).filter(Boolean))].map((e=>Object(v.jsx)("option",{value:e,children:e},e)))]})]}),N.filter((e=>{const t=`${e.first_name} ${e.last_name}`.toLowerCase().includes(u.toLowerCase()),a=!h||e.department===h;return t&&a})).map((e=>Object(v.jsx)($.a.Item,{className:ae.a.PersonItem,onClick:()=>t.push(`/profiles/${e.id}`),style:{cursor:"pointer"},children:Object(v.jsxs)("div",{className:ae.a.PersonContent,children:[Object(v.jsx)("img",{src:e.profile_image,alt:`${e.first_name}'s avatar`}),Object(v.jsxs)("span",{children:[e.first_name," ",e.last_name]})]})},e.id)))]})]})]}):Object(v.jsx)(ee,{message:"Loading..."})},se=a(129),ce=a(11),oe=a.n(ce);var re=function(e){const t=Object(l.f)(),{submitText:a="Submit",onCancel:n,disabled:s=!1,showCancel:c=!0}=e;return Object(v.jsxs)("div",{className:oe.a.FormButtonRow,children:[Object(v.jsx)(T.a,{type:"submit",className:m.a.YellowButton,disabled:s,children:a}),c&&Object(v.jsx)(T.a,{className:m.a.BlueButton,variant:"outline-secondary",onClick:n||(()=>t.goBack()),children:"Cancel"})]})};var ie=function(e){var t,a;let{title:n,content:s,handleChange:c,handleSubmit:o,children:r,submitText:i="Submit",onCancel:l,errors:d}=e;return Object(v.jsxs)(se.a,{onSubmit:o,className:oe.a.FormWrapper,children:[Object(v.jsxs)(se.a.Group,{controlId:"title",className:oe.a.FormGroupSpacing,children:[Object(v.jsx)(L.a,{placement:"top",overlay:Object(v.jsx)(A.a,{children:"Enter a short, clear post title"}),children:Object(v.jsx)(se.a.Control,{type:"text",placeholder:"Enter title",name:"title","aria-label":"Enter a short, clear post title",value:n,onChange:c})}),null===d||void 0===d||null===(t=d.title)||void 0===t?void 0:t.map(((e,t)=>Object(v.jsx)("div",{className:"text-danger mt-1",children:e},t)))]}),Object(v.jsxs)(se.a.Group,{controlId:"content",className:oe.a.FormGroupSpacing,children:[Object(v.jsx)(L.a,{placement:"top",overlay:Object(v.jsx)(A.a,{children:"Write the story you want to share"}),children:Object(v.jsx)(se.a.Control,{as:"textarea",rows:10,placeholder:"Write your story...",name:"content","aria-label":"Write the story you want to share",value:s,onChange:c})}),null===d||void 0===d||null===(a=d.content)||void 0===a?void 0:a.map(((e,t)=>Object(v.jsx)("div",{className:"text-danger mt-1",children:e},t)))]}),r,Object(v.jsx)(re,{submitText:i,onCancel:l})]})};var le=function(){const[e,t]=Object(n.useState)({title:"",content:"",image:null}),{title:a,content:s,image:c}=e,[o,r]=Object(n.useState)({}),d=Object(l.f)(),m=S(),j=a=>{const{name:n,value:s,files:c}=a.target;if("image"===n){const a=c[0];if(a&&a.size>5242880)return void alert("Image must be smaller than 5MB.");t({...e,image:c[0]})}else t({...e,[n]:s})};return Object(v.jsx)(i.a,{children:Object(v.jsx)(ie,{title:a,content:s,handleChange:j,handleSubmit:async e=>{e.preventDefault();const t=new FormData;t.append("title",a),t.append("content",s),c&&t.append("image",c);try{const{data:e}=await g.post("/posts/",t,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"multipart/form-data"}});m(await x.get("/dj-rest-auth/user/").then((e=>e.data))),d.push(`/recognitions/${e.id}?created=true`)}catch(i){var n,o;if(401!==(null===(n=i.response)||void 0===n?void 0:n.status))r(null===(o=i.response)||void 0===o?void 0:o.data)}},submitText:"Create",onCancel:()=>d.push("/"),errors:o,children:Object(v.jsx)(se.a.Group,{controlId:"image",className:oe.a.FormMediaWrapper,children:Object(v.jsx)(L.a,{placement:"top",overlay:Object(v.jsx)(A.a,{children:"Upload an image (optional)"}),children:Object(v.jsx)(se.a.Control,{type:"file",name:"image",onChange:j,"aria-label":"Upload an optional image"})})})})})};var de=function(e){let{postId:t,onCommentSubmit:a,disabled:s=!1}=e;const[c,o]=Object(n.useState)(""),[r,i]=Object(n.useState)({}),l=c.trim().length>0,d=e=>{o(e.target.value)};return Object(v.jsxs)(se.a,{onSubmit:async e=>{e.preventDefault();try{const{data:e}=await g.post("/comments/",{content:c,post:t});o(""),i({}),a&&a(e)}catch(s){var n;i((null===(n=s.response)||void 0===n?void 0:n.data)||{})}},className:oe.a.FormWrapper,children:[Object(v.jsxs)(se.a.Group,{controlId:"commentText",className:oe.a.FormGroupSpacing,children:[s?Object(v.jsx)(se.a.Control,{as:"textarea",rows:2,placeholder:"Log in to comment",name:"comment",disabled:!0,"aria-label":"Log in to comment",value:c,onChange:d}):Object(v.jsx)(L.a,{placement:"top",overlay:Object(v.jsx)(A.a,{children:"Add your comment"}),children:Object(v.jsx)(se.a.Control,{as:"textarea",rows:2,placeholder:"Write a comment...",name:"comment","aria-label":"Add your comment",disabled:s,value:c,onChange:d})}),(null===r||void 0===r?void 0:r.content)&&Object(v.jsx)("div",{className:"text-danger mt-2",children:r.content})]}),Object(v.jsx)(re,{submitText:"Post",disabled:s||!l,showCancel:!1})]})},me=a(33),je=a.n(me);var ue=function(e){const{comment:t,setEditingComment:a,setShowDeleteModal:n}=e;return Object(v.jsxs)("div",{className:je.a.SingleComment,children:[Object(v.jsxs)("div",{className:"d-flex justify-content-between align-items-start",children:[Object(v.jsx)("strong",{className:je.a.CommentAuthor,children:t.display_name}),t.is_user&&Object(v.jsx)(U,{handleEdit:()=>a(t),handleDelete:()=>n(t.id)})]}),Object(v.jsx)("p",{className:je.a.CommentText,children:t.content}),Object(v.jsx)("small",{className:je.a.CommentDate,children:t.created_at})]})};var pe=function(e){const{comment:t,setComments:a,setEditingComment:s,onCancel:c}=e,o=Object(l.f)(),r=Object(l.g)(),[i,d]=Object(n.useState)(t.content);return Object(v.jsxs)(se.a,{onSubmit:async e=>{e.preventDefault();try{const{data:e}=await g.patch(`/comments/${t.id}/`,{content:i});a((a=>a.map((a=>a.id===t.id?e:a)))),s(null),o.replace(`${r.pathname}?comment_edited=true`)}catch(n){}},className:je.a.SingleComment,children:[Object(v.jsx)(se.a.Group,{children:Object(v.jsx)(se.a.Control,{as:"textarea",value:i,onChange:e=>{d(e.target.value)},rows:2,className:je.a.CommentText})}),Object(v.jsx)(re,{submitText:"Update",onCancel:c})]})};var he=function(){const{id:e}=Object(l.h)(),t=Object(l.f)(),a=Object(l.g)(),{currentUser:s}=y(),[c,o]=Object(n.useState)(null),[r,d]=Object(n.useState)([]),[m,j]=Object(n.useState)(!1),[u,p]=Object(n.useState)(!1),[h,b]=Object(n.useState)(null),[O,_]=Object(n.useState)(null),f=!(null===c||void 0===c||!c.nominee);let C=null;const N=new URLSearchParams(a.search),S="true"===N.get("created"),w="true"===N.get("updated"),F="true"===N.get("comment_edited"),k="true"===N.get("comment_deleted"),I=S||w||F||k||u,T=S?"Your recognition has been published!":w?"Your recognition has been updated!":F?"Comment updated successfully!":k?"Comment deleted successfully!":u?"Comment posted successfully!":"";if(Object(n.useEffect)((()=>{if(I){const e=setTimeout((()=>{p(!1),t.replace(a.pathname)}),3e3);return()=>clearTimeout(e)}}),[I,t,a.pathname]),Object(n.useEffect)((()=>{g.get(`/posts/${e}/`).then((e=>{o(e.data)})).catch((e=>{}))}),[e]),Object(n.useEffect)((()=>{g.get(`/comments/?post=${e}`).then((e=>{d(e.data.results||e.data)})).catch((e=>{console.error("Error fetching comments:",e)}))}),[e,s]),!c)return Object(v.jsx)(i.a,{className:"d-flex justify-content-center py-5",children:Object(v.jsx)(ee,{message:"Loading recognition..."})});C=c.is_user?Object(v.jsx)(U,{handleEdit:()=>t.push(`/recognitions/${c.id}/edit`),handleDelete:()=>{j(!0)}}):null;const $=f?null:Object(v.jsxs)("div",{className:M.a.PostFooter,children:[Object(v.jsxs)("div",{className:M.a.ActionItem,children:[c.is_user?Object(v.jsx)(L.a,{placement:"top",overlay:Object(v.jsx)(A.a,{id:"tooltip-self-like",children:"Can't like your own recognition!"}),children:Object(v.jsx)("span",{style:{cursor:"not-allowed"},"aria-label":"You can't like your own recognition",children:Object(v.jsx)("i",{className:"far fa-thumbs-up"})})}):c.like_id?Object(v.jsx)("span",{onClick:async()=>{try{await x.delete(`/likes/${c.like_id}/`),o((e=>({...e,likes_count:e.likes_count-1,like_id:null})))}catch(e){}},style:{cursor:"pointer"},"aria-label":"Unlike this recognition",children:Object(v.jsx)("i",{className:`fas fa-thumbs-up ${M.a.Heart}`})}):s?Object(v.jsx)("span",{onClick:async()=>{try{const{data:e}=await x.post("/likes/",{post:c.id});o((t=>({...t,likes_count:t.likes_count+1,like_id:e.id})))}catch(e){}},style:{cursor:"pointer"},"aria-label":"Like this recognition",children:Object(v.jsx)("i",{className:`far fa-thumbs-up ${M.a.HeartOutline}`})}):Object(v.jsx)(L.a,{placement:"top",overlay:Object(v.jsx)(A.a,{id:`tooltip-login-like-${c.id}`,children:"Log in to like recognitions!"}),children:Object(v.jsx)("span",{className:M.a.DisabledIcon,"aria-label":"Log in to like this recognition",children:Object(v.jsx)("i",{className:"far fa-thumbs-up"})})}),Object(v.jsx)("span",{children:c.likes_count})]}),Object(v.jsxs)("div",{className:M.a.ActionItem,children:[Object(v.jsx)("i",{className:"far fa-comment"}),Object(v.jsx)("span",{children:c.comments_count})]})]});return Object(v.jsxs)(i.a,{children:[I&&T&&Object(v.jsx)(P.a,{variant:"success",dismissible:!0,children:T}),Object(v.jsx)(q,{title:c.title,content:c.content,image:c.image,display_name:c.display_name,profile_image:c.profile_image,created_at:c.created_at,likes_count:c.likes_count,comments_count:c.comments_count,renderDropdown:C,postActions:$,children:Object(v.jsxs)(v.Fragment,{children:[c.image&&Object(v.jsx)("div",{className:M.a.ImageWrapper,children:Object(v.jsx)("img",{src:c.image,alt:c.title,className:M.a.PostImage})}),s?Object(v.jsx)(de,{postId:c.id,onCommentSubmit:e=>{d((t=>[e,...t])),o((e=>({...e,comments_count:e.comments_count+1}))),p(!0)}}):Object(v.jsxs)("p",{className:M.a.LoginToComment,children:[Object(v.jsx)("i",{className:"far fa-comment"})," Log in to leave a comment."]}),Object(v.jsx)("div",{className:je.a.CommentSection}),r.length?r.map((e=>(null===h||void 0===h?void 0:h.id)===e.id?Object(v.jsx)("div",{className:M.a.CommentBlock,children:Object(v.jsx)(pe,{comment:e,postId:c.id,setComments:d,setEditingComment:b,onCancel:()=>b(null)})},e.id):Object(v.jsx)(ue,{comment:e,setEditingComment:b,setShowDeleteModal:_},e.id))):Object(v.jsx)("p",{className:"text-muted px-3",children:"No comments yet."})]})}),Object(v.jsx)(G,{show:m,onHide:()=>j(!1),onConfirm:async()=>{try{await g.delete(`/posts/${c.id}/`),t.push("/?deleted=true")}catch(e){}finally{j(!1)}}}),Object(v.jsx)(G,{show:!!O,onHide:()=>_(null),onConfirm:async()=>{try{await g.delete(`/comments/${O}/`),d((e=>e.filter((e=>e.id!==O)))),o((e=>({...e,comments_count:e.comments_count-1}))),t.replace(`${a.pathname}?comment_deleted=true`)}catch(e){}finally{_(null)}}})]})};var be=function(){const{id:e}=Object(l.h)(),t=Object(l.f)(),[a,s]=Object(n.useState)({title:"",content:"",image:null}),[c,o]=Object(n.useState)(!1),{title:r,content:d,image:m}=a,[j,u]=Object(n.useState)(!1);Object(n.useEffect)((()=>{g.get(`/posts/${e}/`).then((e=>{const{title:t,content:a,image:n}=e.data;s({title:t,content:a,image:n}),u(!0)})).catch((e=>{console.error("Error fetching recognition:",e),t.push("/")}))}),[e,t]);const p=e=>{const{name:t,value:n,files:c}=e.target;s("image"===t?{...a,image:c[0]}:{...a,[t]:n})};return j?Object(v.jsx)(i.a,{children:Object(v.jsx)(ie,{title:r,content:d,image:m,handleChange:p,handleSubmit:async a=>{a.preventDefault();const n=new FormData;n.append("title",r),n.append("content",d),c?n.append("image",""):m&&"string"!==typeof m&&n.append("image",m);try{await g.patch(`/posts/${e}/`,n,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"multipart/form-data"}}),t.push(`/recognitions/${e}?updated=true`)}catch(o){var s;console.error("Submission error:",null===(s=o.response)||void 0===s?void 0:s.data)}},submitText:"Update",onCancel:()=>t.push(`/recognitions/${e}`),children:Object(v.jsxs)(se.a.Group,{className:oe.a.FormMediaWrapper,children:["string"===typeof m&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("img",{src:m,alt:"Current",className:oe.a.FormImagePreview}),Object(v.jsxs)("div",{className:"d-flex align-items-center gap-2 mt-2 mb-3",children:[Object(v.jsx)(se.a.Check,{type:"checkbox",id:"remove-image",label:"","aria-label":"Remove image",checked:c,onChange:e=>o(e.target.checked)}),Object(v.jsx)(se.a.Label,{htmlFor:"remove-image",className:"mb-0",children:"Remove image"})]})]}),Object(v.jsx)(L.a,{placement:"top",overlay:Object(v.jsx)(A.a,{children:"Upload an image (optional)"}),children:Object(v.jsx)(se.a.Control,{type:"file",name:"image",onChange:p,"aria-label":"Upload an image (optional)"})})]})})}):Object(v.jsx)(i.a,{className:"d-flex justify-content-center py-5",children:Object(v.jsx)(ee,{message:"Loading recognition..."})})};var Oe=function(){var e,t;const[a,s]=Object(n.useState)({title:"",content:"",tag:""}),{title:c,content:o,tag:r}=a,[d,m]=Object(n.useState)(""),[j,u]=Object(n.useState)(""),[p,h]=Object(n.useState)([]),[b,O]=Object(n.useState)([]),[_,f]=Object(n.useState)({}),C=Object(l.f)(),N=Object(l.g)(),w=S(),F=y();Object(n.useEffect)((()=>{(async()=>{try{const{data:e}=await g.get("/tags/");O(e.results)}catch(e){}})()}),[]),Object(n.useEffect)((()=>{d?g.get(`/users/?search=${d}`).then((e=>{h(e.data.results)})).catch((e=>{})):h([])}),[d]),Object(n.useEffect)((()=>{const e=new URLSearchParams(N.search),t=e.get("name"),a=e.get("nominee");t&&a&&(m(t),u(parseInt(a)))}),[N.search]);const P=e=>{const{name:t,value:a}=e.target;"nominee"===t?(m(a),u("")):s((e=>({...e,[t]:a})))};return Object(v.jsx)(i.a,{children:Object(v.jsx)(ie,{title:c,content:o,handleChange:P,handleSubmit:async e=>{var t;if(e.preventDefault(),parseInt(j)===(null===F||void 0===F||null===(t=F.currentUser)||void 0===t?void 0:t.pk))return f({nominee:["You can't nominate yourself."]}),m(""),u(""),void h([]);const a=new FormData;a.append("title",c),a.append("content",o),a.append("nominee",j),r&&a.append("tag",r);try{const{data:e}=await g.post("/nominations/",a,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"multipart/form-data"}});w(await x.get("/dj-rest-auth/user/").then((e=>e.data))),C.push(`/nominations/${e.id}?created=true`)}catch(s){var n;f((null===(n=s.response)||void 0===n?void 0:n.data)||{nominee:["Something went wrong."]})}},submitText:"Create",onCancel:()=>{C.push("/")},errors:_,children:Object(v.jsxs)(se.a.Group,{controlId:"nominee",className:oe.a.FormMediaWrapper,children:[Object(v.jsxs)("div",{className:"mb-3",children:[Object(v.jsx)(L.a,{placement:"top",overlay:Object(v.jsx)(A.a,{children:"Search for a teammate by first or last name (you can't nominate yourself)"}),children:Object(v.jsx)(se.a.Control,{type:"text",name:"nominee",placeholder:"Start typing a name...","aria-label":"Search for a teammate by first or last name",value:d,onChange:P})}),null===_||void 0===_||null===(e=_.nominee)||void 0===e?void 0:e.map(((e,t)=>Object(v.jsx)("div",{className:"text-danger mt-1",children:e},t))),p.length>0&&Object(v.jsx)("div",{className:oe.a.SuggestionBox,children:p.map((e=>Object(v.jsxs)("div",{className:oe.a.SuggestionItem,onClick:()=>(e=>{u(e.id),m(`${e.first_name} ${e.last_name}`),h([])})(e),children:[e.first_name," ",e.last_name]},e.id)))})]}),Object(v.jsx)(L.a,{placement:"top",overlay:Object(v.jsx)(A.a,{children:"Pick a tag that reflects the nomination"}),children:Object(v.jsxs)(se.a.Control,{as:"select",name:"tag",value:r,"aria-label":"Pick a tag that reflects the nomination",onChange:P,children:[Object(v.jsx)("option",{value:"",children:"Select a tag"}),b.map((e=>Object(v.jsx)("option",{value:e.name,children:e.name},e.id)))]})}),null===_||void 0===_||null===(t=_.tag)||void 0===t?void 0:t.map(((e,t)=>Object(v.jsx)("div",{className:"text-danger mt-1",children:e},t)))]})})})};var ge=function(){const{id:e}=Object(l.h)(),t=Object(l.f)(),[a,s]=Object(n.useState)(!1),c=Object(l.g)(),[o,r]=Object(n.useState)(null);let d=null;const m=new URLSearchParams(c.search),j="true"===m.get("created"),u="true"===m.get("updated"),p=j||u,h=j?"Your nomination has been published!":u?"Your nomination has been updated!":"";return Object(n.useEffect)((()=>{if(p){const e=setTimeout((()=>{const e=c.pathname;t.replace(e)}),4e3);return()=>clearTimeout(e)}}),[p,t,c.pathname]),Object(n.useEffect)((()=>{g.get(`/nominations/${e}/`).then((e=>{r(e.data)})).catch((e=>{}))}),[e]),o?(d=o.is_user?Object(v.jsx)(U,{handleEdit:()=>t.push(`/nominations/${o.id}/edit`),handleDelete:()=>{s(!0)}}):null,Object(v.jsxs)(i.a,{children:[p&&Object(v.jsx)(P.a,{variant:"success",dismissible:!0,children:h}),Object(v.jsx)(q,{title:o.title,content:o.content,display_name:o.display_name,profile_image:o.profile_image,created_at:o.created_at,renderDropdown:d,metaTop:o.nominee_display_name&&o.tag&&Object(v.jsxs)("p",{className:M.a.NominationMeta,children:[Object(v.jsx)("strong",{children:o.nominee_display_name})," was nominated by",Object(v.jsx)("strong",{children:o.display_name})," ",Object(v.jsx)("span",{style:{backgroundColor:o.tag_color,color:"#fff",padding:"2px 8px",borderRadius:"12px",fontSize:"0.8rem"},children:o.tag})]})}),Object(v.jsx)(G,{show:a,onHide:()=>s(!1),onConfirm:async()=>{try{await g.delete(`/nominations/${o.id}/`),t.push("/?deleted=true")}catch(e){}finally{s(!1)}}})]})):Object(v.jsx)(i.a,{className:"d-flex justify-content-center py-5",children:Object(v.jsx)(ee,{message:"Loading nomination..."})})};var xe=function(){const{id:e}=Object(l.h)(),t=Object(l.f)(),[a,s]=Object(n.useState)({title:"",content:"",nominee_display_name:"",tag:""}),{title:c,content:o,nominee_display_name:r,tag:d}=a,[m,j]=Object(n.useState)([]),[u,p]=Object(n.useState)(!1);Object(n.useEffect)((()=>{g.get(`/nominations/${e}/`).then((e=>{const{title:t,content:a,nominee_display_name:n,tag:c}=e.data;s({title:t,content:a,nominee_display_name:n,tag:c}),p(!0)})).catch((e=>{t.push("/")}))}),[e,t]),Object(n.useEffect)((()=>{g.get("/tags/").then((e=>j(e.data.results))).catch((e=>{}))}),[]);const h=e=>{const{name:t,value:n}=e.target;s({...a,[t]:n})};return u?Object(v.jsx)(i.a,{children:Object(v.jsx)(ie,{title:c,content:o,handleChange:h,handleSubmit:async a=>{a.preventDefault();const n=new FormData;n.append("title",c),n.append("content",o),n.append("tag",d);try{await g.patch(`/nominations/${e}/`,n,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"multipart/form-data"}}),t.push(`/nominations/${e}?updated=true`)}catch(s){}},submitText:"Update",onCancel:()=>t.push(`/nominations/${e}`),children:Object(v.jsxs)(se.a.Group,{className:oe.a.FormMediaWrapper,children:[Object(v.jsx)(se.a.Label,{className:"mb-2",children:Object(v.jsx)("strong",{children:"Nominee:"})}),Object(v.jsx)("div",{className:"mb-3",children:r}),Object(v.jsx)(L.a,{placement:"top",overlay:Object(v.jsx)(A.a,{children:"Select a new tag if needed"}),children:Object(v.jsxs)(se.a.Control,{as:"select",name:"tag",value:d,"aria-label":"Select a new tag if needed",onChange:h,children:[Object(v.jsx)("option",{value:"",children:"Select a tag"}),m.map((e=>Object(v.jsx)("option",{value:e.name,children:e.name},e.id)))]})})]})})}):Object(v.jsx)(i.a,{className:"d-flex justify-content-center py-5",children:Object(v.jsx)(ee,{message:"Loading nomination..."})})};var _e=function(){const{id:e}=Object(l.h)(),t=Object(l.f)(),a=Object(l.g)(),[s,c]=Object(n.useState)(new URLSearchParams(a.search).get("updated")),{currentUser:o}=y(),[r,d]=Object(n.useState)(null),[j,u]=Object(n.useState)([]),[p,h]=Object(n.useState)([]),[b,O]=Object(n.useState)(!1),[x,_]=Object(n.useState)(!1),[f,C]=Object(n.useState)(!1);return Object(n.useEffect)((()=>{if(s){const e=setTimeout((()=>c(!1)),4e3);return()=>clearTimeout(e)}}),[s]),Object(n.useEffect)((()=>{(async()=>{try{const{data:t}=await g.get(`/user-profiles/${e}/`);d(t),O(!0)}catch(t){}})()}),[e]),Object(n.useEffect)((()=>{e&&g.get(`/posts/?user__profile=${e}`).then((e=>u(e.data.results))).catch((e=>{})).finally((()=>_(!0)))}),[e]),Object(n.useEffect)((()=>{e&&g.get(`/nominations/?nominator__profile=${e}`).then((e=>h(e.data.results))).catch((e=>{})).finally((()=>C(!0)))}),[e]),b&&x&&f?Object(v.jsxs)(v.Fragment,{children:[s&&Object(v.jsx)("div",{className:"alert alert-success text-center mt-3",children:"Your profile has been updated!"}),Object(v.jsxs)(i.a,{children:[r&&Object(v.jsxs)("div",{className:V.a.ProfileWrapper,children:[Object(v.jsx)("div",{className:V.a.Banner}),Object(v.jsx)("div",{className:V.a.AvatarWrapper,children:Object(v.jsx)("img",{src:r.profile_image,alt:`${r.first_name} ${r.last_name}`,className:V.a.ProfileAvatar})}),Object(v.jsxs)("div",{className:V.a.ProfileDetails,children:[Object(v.jsx)("div",{className:V.a.NameRow,children:Object(v.jsxs)("div",{className:V.a.NameRow,children:[Object(v.jsxs)("h3",{children:[r.first_name," ",r.last_name]}),o?r.is_user_profile?Object(v.jsx)("span",{className:V.a.EditIcon,onClick:()=>t.push(`/profiles/${r.id}/edit`),children:Object(v.jsx)("i",{className:"fa-solid fa-pen"})}):Object(v.jsx)(T.a,{className:m.a.YellowButton,onClick:()=>t.push(`/nominations/create?nominee=${r.user}&name=${r.first_name} ${r.last_name}`),children:"Nominate"}):null]})}),Object(v.jsx)("p",{className:V.a.Department,children:r.department}),Object(v.jsx)("p",{className:V.a.Bio,children:r.presentation||"No bio yet."})]})]}),Object(v.jsxs)("div",{className:V.a.TwoColumnFeed,children:[Object(v.jsxs)("div",{className:V.a.FeedColumn,children:[Object(v.jsx)("div",{className:V.a.SectionTitlePurple,children:"Recognitions"}),j.filter((e=>e.user===r.user)).map((e=>Object(v.jsx)(K,{...e,setRecognitions:u,onPostDelete:e=>u((t=>t.filter((t=>t.id!==e))))},`post-${e.id}`)))]}),Object(v.jsxs)("div",{className:V.a.FeedColumn,children:[Object(v.jsx)("div",{className:V.a.SectionTitleYellow,children:"Nominations"}),p.filter((e=>e.nominator===r.user||e.nominee_username===r.user)).map((e=>Object(v.jsx)(Q,{...e,setPosts:h,onPostDelete:e=>h((t=>t.filter((t=>t.id!==e))))},`nom-${e.id}`)))]})]})]})]}):Object(v.jsx)(ee,{message:"Loading profile..."})};var fe=function(){const{id:e}=Object(l.h)(),t=Object(l.f)(),a=S(),[s,c]=Object(n.useState)(null),[o,r]=Object(n.useState)(""),[d,m]=Object(n.useState)(""),[j,u]=Object(n.useState)(""),[p,h]=Object(n.useState)(null),[b,O]=Object(n.useState)(!1);return Object(n.useEffect)((()=>{(async()=>{try{const{data:t}=await g.get(`/user-profiles/${e}/`);c(t),r(t.first_name),m(t.last_name),u(t.presentation||""),O(!0)}catch(t){}})()}),[e]),b?Object(v.jsxs)("div",{className:"container mt-4",children:[Object(v.jsx)("h2",{children:"Edit your profile"}),s?Object(v.jsxs)(se.a,{onSubmit:async e=>{e.preventDefault();const n=new FormData;n.append("first_name",o),n.append("last_name",d),n.append("presentation",j),p&&n.append("profile_image",p);try{const{data:e}=await g.patch(`/user-profiles/${s.id}/`,n,{headers:{Authorization:`Bearer ${localStorage.getItem("access_token")}`,"Content-Type":"multipart/form-data"}});c(e),a(await x.get("/dj-rest-auth/user/").then((e=>e.data))),t.push(`/profiles/${s.id}?updated=true`)}catch(r){}},children:[Object(v.jsx)(se.a.Group,{controlId:"firstName",className:oe.a.FormGroupSpacing,children:Object(v.jsx)(L.a,{placement:"top",overlay:Object(v.jsx)(A.a,{children:"To update your first name, please contact your HR representative"}),children:Object(v.jsx)(se.a.Control,{type:"text",value:o,readOnly:!0,placeholder:"First Name","aria-label":"First Name (read-only)"})})}),Object(v.jsx)(se.a.Group,{controlId:"lastName",className:oe.a.FormGroupSpacing,children:Object(v.jsx)(L.a,{placement:"top",overlay:Object(v.jsx)(A.a,{children:"To update your last name, please contact your HR representative"}),children:Object(v.jsx)(se.a.Control,{type:"text",value:d,readOnly:!0,placeholder:"Last Name","aria-label":"Last Name (read-only)"})})}),Object(v.jsx)(se.a.Group,{controlId:"presentation",className:oe.a.FormGroupSpacing,children:Object(v.jsx)(L.a,{placement:"top",overlay:Object(v.jsx)(A.a,{children:"Write a short bio about yourself"}),children:Object(v.jsx)(se.a.Control,{as:"textarea",rows:3,value:j,onChange:e=>u(e.target.value),placeholder:"Write something about yourself","aria-label":"Short bio about yourself"})})}),Object(v.jsxs)(se.a.Group,{className:oe.a.FormGroupSpacing,children:[s.profile_image&&Object(v.jsx)("img",{src:s.profile_image,alt:"Current profile",className:oe.a.FormImagePreview}),Object(v.jsx)(se.a.Control,{type:"file",name:"profile_image",onChange:e=>h(e.target.files[0]),"aria-label":"Upload new profile image"})]}),Object(v.jsx)(re,{submitText:"Update",onCancel:()=>t.goBack()})]}):Object(v.jsx)("p",{children:"Loading profile..."})]}):Object(v.jsx)(i.a,{className:"d-flex justify-content-center py-5",children:Object(v.jsx)(ee,{message:"Loading profile..."})})},ve=a(10),Ce=a.n(ve),Ne=a.p+"static/media/auth_pic.305084ff.jpeg";var ye=function(){const e=Object(l.g)(),[t,a]=Object(n.useState)(new URLSearchParams(e.search).get("registered")),[s,c]=Object(n.useState)(new URLSearchParams(e.search).get("loggedOut"));Object(n.useEffect)((()=>{if(t||s){const e=setTimeout((()=>{a(!1),c(!1)}),4e3);return()=>clearTimeout(e)}}),[t,s]);const o=S(),[d,j]=Object(n.useState)({username:"",password:""}),[u,p]=Object(n.useState)({}),{username:h,password:b}=d,x=Object(l.f)();function f(e){j({...d,[e.target.name]:e.target.value})}return Object(v.jsxs)(v.Fragment,{children:[t&&Object(v.jsx)(P.a,{variant:"success",className:"mt-3 text-center",children:"Registration successful! Please log in."}),s&&Object(v.jsx)(P.a,{variant:"info",className:"mt-3 text-center",children:"You have been logged out."}),Object(v.jsx)(i.a,{className:"d-flex justify-content-center",children:Object(v.jsx)("div",{className:Ce.a.gradient,children:Object(v.jsx)("div",{className:Ce.a.gradientOverlay,children:Object(v.jsxs)("div",{className:Ce.a.splitBox,children:[Object(v.jsxs)("div",{className:Ce.a.formBox,children:[Object(v.jsx)("h2",{className:Ce.a.AuthTitle,children:"LOGIN"}),Object.keys(u).length>0&&Object(v.jsx)("div",{className:Ce.a.ErrorBox,children:Object(v.jsx)("ul",{className:"mb-0 ps-3",children:Object.values(u).flat().map(((e,t)=>Object(v.jsx)("li",{children:e},t)))})}),Object(v.jsxs)(se.a,{onSubmit:async function(e){e.preventDefault();try{const{data:e}=await O.a.post("/dj-rest-auth/login/",d);localStorage.setItem("access_token",e.access_token),localStorage.setItem("refresh_token",e.refresh_token),(e=>{const t=Object(_.a)(null===e||void 0===e?void 0:e.refresh_token).exp;localStorage.setItem("refreshTokenTimestamp",t)})(e);const{data:t}=await g.get("/dj-rest-auth/user/");o(t),x.push("/")}catch(a){var t;p((null===(t=a.response)||void 0===t?void 0:t.data)||{})}},className:Ce.a.FormWrapper,children:[Object(v.jsxs)(se.a.Group,{controlId:"username",className:Ce.a.FormGroupSpacing,children:[Object(v.jsx)(se.a.Label,{className:"d-none",children:"Username"}),Object(v.jsx)(se.a.Control,{type:"text",placeholder:"Username",name:"username",value:h,onChange:f})]}),Object(v.jsxs)(se.a.Group,{controlId:"password",className:Ce.a.FormGroupSpacing,children:[Object(v.jsx)(se.a.Label,{className:"d-none",children:"Password"}),Object(v.jsx)(se.a.Control,{type:"password",placeholder:"Password",name:"password",value:b,onChange:f})]}),Object(v.jsx)(T.a,{type:"submit",className:`${m.a.YellowButton} ${Ce.a.CenteredButton}`,children:"Submit"})]}),Object(v.jsxs)("div",{className:Ce.a.AuthLink,children:["OR",Object(v.jsx)(r.b,{to:"/register",className:Ce.a.AuthLinkHighlight,children:"Sign up!"})]})]}),Object(v.jsx)("div",{className:Ce.a.imageBox,children:Object(v.jsx)("img",{src:Ne,alt:"Sign in illustration",className:Ce.a.AuthImage})})]})})})})]})},Se=a.p+"static/media/register_pic.769add72.jpg";var we=function(){const[e,t]=Object(n.useState)({username:"",password1:"",password2:""}),[a,s]=Object(n.useState)({}),{username:c,password1:o,password2:d}=e,j=Object(l.f)();function u(a){t({...e,[a.target.name]:a.target.value})}return Object(v.jsx)(i.a,{className:"d-flex justify-content-center",children:Object(v.jsx)("div",{className:Ce.a.gradient,children:Object(v.jsx)("div",{className:Ce.a.gradientOverlay,children:Object(v.jsxs)("div",{className:Ce.a.splitBox,children:[Object(v.jsxs)("div",{className:Ce.a.formBox,children:[Object(v.jsx)("h2",{className:Ce.a.AuthTitle,children:"Register"}),Object(v.jsxs)(se.a,{onSubmit:async function(t){t.preventDefault();try{await g.post("/dj-rest-auth/registration/",e),j.push("/login?registered=true")}catch(n){var a;s((null===(a=n.response)||void 0===a?void 0:a.data)||{})}},className:Ce.a.FormWrapper,children:[Object.keys(a).length>0&&Object(v.jsx)("div",{className:Ce.a.ErrorBox,children:Object(v.jsx)("ul",{className:"mb-0 ps-3",children:Object.values(a).flat().map(((e,t)=>Object(v.jsx)("li",{children:e},t)))})}),Object(v.jsxs)(se.a.Group,{controlId:"username",className:Ce.a.FormGroupSpacing,children:[Object(v.jsx)(se.a.Label,{className:"d-none",children:"Username"}),Object(v.jsx)(se.a.Control,{type:"text",placeholder:"Username",name:"username",value:c,onChange:u})]}),Object(v.jsxs)(se.a.Group,{controlId:"password1",className:Ce.a.FormGroupSpacing,children:[Object(v.jsx)(se.a.Label,{className:"d-none",children:"Password"}),Object(v.jsx)(se.a.Control,{type:"password",placeholder:"Password",name:"password1",value:o,onChange:u})]}),Object(v.jsxs)(se.a.Group,{controlId:"password2",className:Ce.a.FormGroupSpacing,children:[Object(v.jsx)(se.a.Label,{className:"d-none",children:"Confirm Password"}),Object(v.jsx)(se.a.Control,{type:"password",placeholder:"Confirm Password",name:"password2",value:d,onChange:u})]}),Object(v.jsx)(T.a,{type:"submit",className:`${m.a.YellowButton} ${Ce.a.CenteredButton}`,children:"Submit"})]}),Object(v.jsxs)("div",{className:Ce.a.AuthLink,children:["OR",Object(v.jsx)(r.b,{to:"/login",className:Ce.a.AuthLinkHighlight,children:"Log In!"})]})]}),Object(v.jsx)("div",{className:Ce.a.imageBox,children:Object(v.jsx)("img",{src:Se,alt:"Register illustration",className:Ce.a.AuthImage})})]})})})})};var Fe=function(){const{currentUserLoaded:e}=y();return e?Object(v.jsxs)("div",{className:m.a.App,children:[Object(v.jsx)(F,{}),Object(v.jsx)(i.a,{className:m.a.Main,children:Object(v.jsxs)(l.c,{children:[Object(v.jsx)(l.a,{exact:!0,path:"/",component:ne}),Object(v.jsx)(l.a,{exact:!0,path:"/recognitions/create",component:le}),Object(v.jsx)(l.a,{exact:!0,path:"/recognitions/:id",component:he}),Object(v.jsx)(l.a,{exact:!0,path:"/recognitions/:id/edit",component:be}),Object(v.jsx)(l.a,{exact:!0,path:"/nominations/create",component:Oe}),Object(v.jsx)(l.a,{exact:!0,path:"/nominations/:id",component:ge}),Object(v.jsx)(l.a,{exact:!0,path:"/nominations/:id/edit",component:xe}),Object(v.jsx)(l.a,{exact:!0,path:"/profiles/:id",component:_e}),Object(v.jsx)(l.a,{exact:!0,path:"/profiles/:id/edit",component:fe}),Object(v.jsx)(l.a,{exact:!0,path:"/login",component:ye}),Object(v.jsx)(l.a,{exact:!0,path:"/register",component:we}),Object(v.jsx)(l.a,{render:()=>Object(v.jsx)("p",{children:"Page not found"})})]})})]}):null};var Pe=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,136)).then((t=>{let{getCLS:a,getFID:n,getFCP:s,getLCP:c,getTTFB:o}=t;a(e),n(e),s(e),c(e),o(e)}))};o.a.render(Object(v.jsx)(s.a.StrictMode,{children:Object(v.jsx)(r.a,{children:Object(v.jsx)(w,{children:Object(v.jsx)(Fe,{})})})}),document.getElementById("root")),Pe()},15:function(e,t,a){e.exports={PostHeaderWrapper:"Profile_PostHeaderWrapper__1u0tN",HeaderLeft:"Profile_HeaderLeft__1eICc",Avatar:"Profile_Avatar__3jahj",ProfileWrapper:"Profile_ProfileWrapper__2hX_C",Banner:"Profile_Banner__1TXeK",CompanyName:"Profile_CompanyName__3xp_1",EditIcon:"Profile_EditIcon__Du4pB",AvatarWrapper:"Profile_AvatarWrapper__1k8ru",ProfileAvatar:"Profile_ProfileAvatar__2uv_j",NameRow:"Profile_NameRow__1yZFR",ProfileDetails:"Profile_ProfileDetails__Z1h8m",Department:"Profile_Department__281vj",Bio:"Profile_Bio__3Zlhj",TwoColumnFeed:"Profile_TwoColumnFeed__1Kev4",FeedColumn:"Profile_FeedColumn__1daGe",SectionTitlePurple:"Profile_SectionTitlePurple__HDOQ6",SectionTitleYellow:"Profile_SectionTitleYellow__1YogP"}},23:function(e,t,a){e.exports={FeedButton:"HomeFeedPage_FeedButton__TzTd8",FeedToggleButtons:"HomeFeedPage_FeedToggleButtons__2iujI",FeedToggleActive:"HomeFeedPage_FeedToggleActive__1r3Ap",FeedToggleInactive:"HomeFeedPage_FeedToggleInactive__1n6t-",FeedContent:"HomeFeedPage_FeedContent__2yePL",PostCard:"HomeFeedPage_PostCard__KOPm-",PersonItem:"HomeFeedPage_PersonItem__24LIT",PersonContent:"HomeFeedPage_PersonContent__3kTEO",SearchFilterBlock:"HomeFeedPage_SearchFilterBlock__15nv6",FilterInput:"HomeFeedPage_FilterInput__2SRFV",FilterSelect:"HomeFeedPage_FilterSelect__Dljfr"}},29:function(e,t,a){e.exports={App:"App_App__1lbrG",Main:"App_Main__1eJsZ",YellowButton:"App_YellowButton__1Qzej",BlueButton:"App_BlueButton__2jV1c"}},33:function(e,t,a){e.exports={CommentSection:"Comment_CommentSection__3CGtR",SingleComment:"Comment_SingleComment__37rPz",CommentAuthor:"Comment_CommentAuthor__3lWSc",CommentText:"Comment_CommentText__ttCTQ",CommentDate:"Comment_CommentDate__1Z1_P"}},66:function(e,t,a){e.exports={DropdownToggle:"MoreDropdown_DropdownToggle__h1s3T",DropdownItem:"MoreDropdown_DropdownItem__m5TH-"}},67:function(e,t,a){e.exports={LoaderWrapper:"LoadingIndicator_LoaderWrapper__3GUK2",Spinner:"LoadingIndicator_Spinner__1L6aF",spin:"LoadingIndicator_spin__3hhrF",Message:"LoadingIndicator_Message__2bNaE"}},8:function(e,t,a){e.exports={CardWrapper:"PostCard_CardWrapper__1aPfU",PostTitle:"PostCard_PostTitle__amYVY",PostContent:"PostCard_PostContent__1mF67",ViewFullPostWrapper:"PostCard_ViewFullPostWrapper__6ZfRw",ViewFullPostLink:"PostCard_ViewFullPostLink__1MjBC",PostFooter:"PostCard_PostFooter__3RbvB",PostChildren:"PostCard_PostChildren__7MF44",ActionItem:"PostCard_ActionItem__1_YXt",Clickable:"PostCard_Clickable__3KGDz",DisabledIcon:"PostCard_DisabledIcon__35ZDD",LoginToComment:"PostCard_LoginToComment__3t1Dq",TagSection:"PostCard_TagSection__32VHi",PostImage:"PostCard_PostImage__2S_6F"}},82:function(e,t,a){e.exports={Navbar:"NavBar_Navbar__1-xmk","nav-link":"NavBar_nav-link__3OyqH"}},92:function(e,t,a){}},[[122,1,2]]]);
//# sourceMappingURL=main.3b9937e5.chunk.js.map